{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, unref as _unref, isRef as _isRef, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, resolveComponent as _resolveComponent, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-66a94ee6\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"d-flex justify-center align-center\"\n};\nconst _hoisted_2 = {\n  class: \"elevation-10 rounded-lg py-3 px-4\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-white text-center mb-5\"\n}, \"Login\", -1));\nconst _hoisted_4 = {\n  class: \"mb-4\"\n};\nconst _hoisted_5 = {\n  class: \"mb-6\"\n};\nconst _hoisted_6 = {\n  class: \"w-100 text-center\"\n};\nimport { ref } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { db } from '@/firebase';\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport { onMounted } from 'vue';\nimport ErrorInputLogin from '@/components/Popups/ErrorLogin/ErrorInputLogin.vue';\nimport AlertPopupPanel from '@/components/Popups/PanelPopups/AlertPopupPanel.vue';\nexport default {\n  __name: 'LoginView',\n  setup(__props) {\n    let AllUsers = ref([]);\n    onMounted(async () => {\n      onSnapshot(collection(db, \"usuarios\"), snapshot => {\n        snapshot.forEach(docUser => {\n          const user = {\n            id: docUser.id,\n            nome: docUser.data().nome,\n            gmail: docUser.data().gmail,\n            senha: docUser.data().senha\n          };\n          AllUsers.value.push(user);\n        });\n      });\n    });\n    let gmail = ref('');\n    let senha = ref('');\n    let store = useStore();\n    let router = useRouter();\n    const logarUsuario = () => {\n      let gmailValue = gmail.value.trim();\n      let senhaValue = senha.value.trim();\n      if (gmailValue != '' && senhaValue != '') {\n        //Verifica se tem uma conta existente\n        let verificarSeAContaExiste = AllUsers.value.find(user => {\n          if (user.gmail === gmailValue && user.senha === senhaValue) {\n            return true;\n          }\n          return false;\n        });\n        let gmailUser = AllUsers.value.find(item => item.gmail == gmailValue);\n        let senhaUser = AllUsers.value.find(item => item.senha == senhaValue);\n        let nomeUser = AllUsers.value.find(item => {\n          if (item.gmail == gmailValue) return item.nome;\n        });\n        if (verificarSeAContaExiste) {\n          loader.value = true;\n          setTimeout(() => {\n            loader.value = false;\n            router.push('/painel');\n          }, 900);\n          const token = {\n            id: gmailUser.id,\n            nome: nomeUser.nome,\n            gmail: gmailUser.gmail,\n            senha: senhaUser.senha,\n            tokenOn: true\n          };\n          store.commit('addToken', token);\n        } else {\n          alertPopupPanel('Conta não encontrada!');\n        }\n      } else {\n        ErrorInputs(gmail.value, senha.value);\n      }\n    };\n\n    // Loader\n\n    let loader = ref(false);\n\n    // Popups\n\n    let stateErrorInputGmail = ref(false);\n    let stateErrorInputPassword = ref(false);\n    const ErrorInputs = (gmail, password) => {\n      if (gmail === '') {\n        stateErrorInputGmail.value = true;\n      }\n      if (password === '') {\n        stateErrorInputPassword.value = true;\n      }\n    };\n    let statePopupPanel = ref(false);\n    let textPopupPanel = ref('');\n    const alertPopupPanel = msg => {\n      statePopupPanel.value = true;\n      textPopupPanel.value = msg;\n      setTimeout(() => {\n        statePopupPanel.value = false;\n      }, 2000);\n    };\n    return (_ctx, _cache) => {\n      const _component_v_btn = _resolveComponent(\"v-btn\");\n      const _component_router_link = _resolveComponent(\"router-link\");\n      const _component_v_container = _resolveComponent(\"v-container\");\n      const _component_v_progress_linear = _resolveComponent(\"v-progress-linear\");\n      const _component_v_card_text = _resolveComponent(\"v-card-text\");\n      const _component_v_card = _resolveComponent(\"v-card\");\n      const _component_v_dialog = _resolveComponent(\"v-dialog\");\n      return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"header\", _hoisted_1, [_createVNode(_component_v_container, {\n        class: \"d-flex justify-center align-center\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"form\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n          required: \"\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _isRef(gmail) ? gmail.value = $event : gmail = $event),\n          class: \"text-white w-100 border-0 pa-2 rounded\",\n          type: \"email\",\n          placeholder: \"Seu email\"\n        }, null, 512), [[_vModelText, _unref(gmail)]]), _createVNode(ErrorInputLogin, {\n          statePopup: _unref(stateErrorInputGmail)\n        }, {\n          default: _withCtx(() => [_createTextVNode(\" Gmail incorreto! \")]),\n          _: 1\n        }, 8, [\"statePopup\"])]), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n          required: \"\",\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _isRef(senha) ? senha.value = $event : senha = $event),\n          class: \"text-white w-100 border-0 pa-2 rounded\",\n          type: \"password\",\n          placeholder: \"Sua senha\"\n        }, null, 512), [[_vModelText, _unref(senha)]]), _createVNode(ErrorInputLogin, {\n          statePopup: _unref(stateErrorInputPassword)\n        }, {\n          default: _withCtx(() => [_createTextVNode(\" Senha incorreta! \")]),\n          _: 1\n        }, 8, [\"statePopup\"])]), _createVNode(_component_v_btn, {\n          disabled: _unref(loader),\n          loading: _unref(loader),\n          onClick: _cache[2] || (_cache[2] = $event => logarUsuario()),\n          class: \"w-100 my-3 button-entrar\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Entrar\")]),\n          _: 1\n        }, 8, [\"disabled\", \"loading\"]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_router_link, {\n          class: \"link-registrar text-decoration-none font-weight-light\",\n          to: \"/auth/registrar\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Não tem uma conta?\")]),\n          _: 1\n        })])])]),\n        _: 1\n      })]), _createVNode(_component_v_dialog, {\n        modelValue: _unref(loader),\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _isRef(loader) ? loader.value = $event : loader = $event),\n        scrim: false,\n        persistent: \"\",\n        width: \"auto\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_card, {\n          color: \"blue-darken-1\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_v_card_text, null, {\n            default: _withCtx(() => [_createTextVNode(\" Entrando \"), _createVNode(_component_v_progress_linear, {\n              indeterminate: \"\",\n              color: \"white\",\n              class: \"mb-0\"\n            })]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"modelValue\"]), _createVNode(AlertPopupPanel, {\n        statePopupPanel: _unref(statePopupPanel)\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(_unref(textPopupPanel)), 1)]),\n        _: 1\n      }, 8, [\"statePopupPanel\"])], 64);\n    };\n  }\n};","map":{"version":3,"names":["ref","useStore","useRouter","db","collection","onSnapshot","onMounted","ErrorInputLogin","AlertPopupPanel","AllUsers","snapshot","forEach","docUser","user","id","nome","data","gmail","senha","value","push","store","router","logarUsuario","gmailValue","trim","senhaValue","verificarSeAContaExiste","find","gmailUser","item","senhaUser","nomeUser","loader","setTimeout","token","tokenOn","commit","alertPopupPanel","ErrorInputs","stateErrorInputGmail","stateErrorInputPassword","password","statePopupPanel","textPopupPanel","msg"],"sources":["C:/Users/PC/Documents/GitHub/daskfinances/src/views/auth/LoginView.vue"],"sourcesContent":["<template>\r\n  <header class=\"d-flex justify-center align-center\">\r\n    <v-container class=\"d-flex justify-center align-center\">\r\n      <form class=\"elevation-10 rounded-lg py-3 px-4\">\r\n        <h1 class=\"text-white text-center mb-5\">Login</h1>\r\n        <div class=\"mb-4\">\r\n          <input\r\n          required\r\n          v-model=\"gmail\"\r\n          class=\"text-white w-100 border-0 pa-2 rounded\"\r\n          type=\"email\"\r\n          placeholder=\"Seu email\">\r\n          <ErrorInputLogin\r\n            :statePopup=\"stateErrorInputGmail\"\r\n          >\r\n            Gmail incorreto!\r\n          </ErrorInputLogin>\r\n        </div>\r\n\r\n        <div class=\"mb-6\">\r\n          <input\r\n          required\r\n          v-model=\"senha\"\r\n          class=\"text-white w-100 border-0 pa-2 rounded\"\r\n          type=\"password\"\r\n          placeholder=\"Sua senha\">\r\n          <ErrorInputLogin\r\n            :statePopup=\"stateErrorInputPassword\"\r\n          >\r\n            Senha incorreta!\r\n          </ErrorInputLogin>\r\n        </div>\r\n\r\n        <v-btn\r\n        :disabled=\"loader\"\r\n        :loading=\"loader\"\r\n        @click=\"logarUsuario()\"\r\n        class=\"w-100 my-3 button-entrar\"\r\n        >Entrar</v-btn>\r\n\r\n        <div class=\"w-100 text-center\">\r\n          <router-link\r\n          class=\"link-registrar text-decoration-none font-weight-light\"\r\n          to=\"/auth/registrar\">Não tem uma conta?</router-link>\r\n        </div>\r\n      </form>\r\n    </v-container>\r\n  </header>\r\n\r\n  <v-dialog\r\n      v-model=\"loader\"\r\n      :scrim=\"false\"\r\n      persistent\r\n      width=\"auto\"\r\n    >\r\n      <v-card\r\n        color=\"blue-darken-1\"\r\n      >\r\n        <v-card-text>\r\n          Entrando\r\n          <v-progress-linear\r\n            indeterminate\r\n            color=\"white\"\r\n            class=\"mb-0\"\r\n          ></v-progress-linear>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-dialog>\r\n\r\n  <AlertPopupPanel\r\n    :statePopupPanel=\"statePopupPanel\"\r\n  >\r\n    {{ textPopupPanel }}\r\n  </AlertPopupPanel>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport { db } from '@/firebase'\r\nimport { collection, onSnapshot} from \"firebase/firestore\";\r\nimport { onMounted } from 'vue';\r\nimport ErrorInputLogin from '@/components/Popups/ErrorLogin/ErrorInputLogin.vue';\r\nimport AlertPopupPanel from '@/components/Popups/PanelPopups/AlertPopupPanel.vue';\r\n\r\nlet AllUsers = ref([])\r\n\r\nonMounted(async () => {\r\n  onSnapshot(collection(db, \"usuarios\"), (snapshot) => {\r\n    snapshot.forEach((docUser) => {\r\n      const user = {\r\n        id: docUser.id,\r\n        nome: docUser.data().nome,\r\n        gmail: docUser.data().gmail,\r\n        senha: docUser.data().senha\r\n      }\r\n\r\n      AllUsers.value.push(user)\r\n    })\r\n  });\r\n})\r\n\r\nlet gmail = ref('')\r\nlet senha = ref('')\r\n\r\nlet store = useStore()\r\nlet router = useRouter()\r\n\r\nconst logarUsuario = () => {\r\n  let gmailValue = gmail.value.trim()\r\n  let senhaValue = senha.value.trim()\r\n\r\n  if(gmailValue != '' && senhaValue != '') {\r\n    //Verifica se tem uma conta existente\r\n    let verificarSeAContaExiste = AllUsers.value.find(user => {\r\n      if(user.gmail === gmailValue && user.senha === senhaValue) {\r\n        return true\r\n      }\r\n\r\n      return false\r\n    })\r\n\r\n    let gmailUser = AllUsers.value.find((item) => item.gmail == gmailValue)\r\n    let senhaUser = AllUsers.value.find((item) => item.senha == senhaValue)\r\n    let nomeUser = AllUsers.value.find((item) => {\r\n      if(item.gmail == gmailValue)\r\n        return item.nome\r\n    })\r\n\r\n    if(verificarSeAContaExiste) {\r\n      loader.value = true\r\n      setTimeout(() => {\r\n        loader.value = false\r\n        router.push('/painel')\r\n      },900)\r\n\r\n      const token = {\r\n        id: gmailUser.id,\r\n        nome: nomeUser.nome,\r\n        gmail: gmailUser.gmail,\r\n        senha: senhaUser.senha,\r\n        tokenOn: true\r\n      }\r\n\r\n      store.commit('addToken',token)\r\n    }else {\r\n      alertPopupPanel('Conta não encontrada!')\r\n    }\r\n  }else {\r\n    ErrorInputs(gmail.value,senha.value)\r\n  }\r\n}\r\n\r\n// Loader\r\n\r\nlet loader = ref(false)\r\n\r\n// Popups\r\n\r\nlet stateErrorInputGmail = ref(false)\r\nlet stateErrorInputPassword = ref(false)\r\n\r\nconst ErrorInputs = (gmail,password) => {\r\n\r\n  if(gmail === '') {\r\n    stateErrorInputGmail.value = true\r\n  }\r\n\r\n  if(password === '') {\r\n    stateErrorInputPassword.value = true\r\n  }\r\n\r\n}\r\n\r\nlet statePopupPanel = ref(false)\r\nlet textPopupPanel = ref('')\r\n\r\nconst alertPopupPanel = (msg) => {\r\n  statePopupPanel.value = true\r\n  textPopupPanel.value = msg\r\n\r\n  setTimeout(() => {\r\n    statePopupPanel.value = false\r\n  },2000)\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  header {\r\n    height: 100vh;\r\n    background-color: #17191c;\r\n\r\n    form {\r\n      width: 100%;\r\n      max-width: 400px;\r\n      min-height: 300px;\r\n      background-color: #25272c;\r\n\r\n      input {\r\n        outline: none;\r\n        background-color: #17191c;\r\n      }\r\n\r\n      .link-registrar {\r\n        color: #959595;\r\n        font-size: 15px;\r\n\r\n        &:hover {\r\n          color: #949494;\r\n          text-decoration: underline !important;\r\n        }\r\n      }\r\n\r\n      .button-entrar {\r\n        background-color: #00b2ff;\r\n        color: white;\r\n        box-shadow: none;\r\n\r\n        &:hover {\r\n          box-shadow: 0 0 10px #0084ff65;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}