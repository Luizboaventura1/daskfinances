{"ast":null,"code":"import { useStore } from 'vuex';\nimport { onMounted } from 'vue';\nimport { db } from '@/firebase';\nimport { collection, addDoc, onSnapshot } from \"firebase/firestore\";\nexport default {\n  __name: 'ReceberDados',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const store = useStore();\n    onMounted(async () => {\n      onSnapshot(collection(db, \"usuarios\"), snapshot => {\n        snapshot.forEach(docUsuario => {\n          // Criar novo saldo\n          if (docUsuario.data().gmail === store.state.token.gmail) {\n            if (store.state.token.id === '') {\n              store.state.token.id = docUsuario.id;\n              store.commit('addToken', store.state.token);\n              addDoc(collection(db, 'saldo'), {\n                idUser: docUsuario.id,\n                saldo: 0,\n                receita: 0,\n                gasto: 0\n              });\n              addDoc(collection(db, \"notifications\"), {\n                idUser: docUsuario.id,\n                title: 'DaskFinances',\n                text: 'Aproveite nossa plataforma 100% gratuita!',\n                date: String(new Date()),\n                link: '/',\n                unread: true\n              });\n            }\n          }\n        });\n      });\n    });\n    const __returned__ = {\n      store,\n      get useStore() {\n        return useStore;\n      },\n      onMounted,\n      get db() {\n        return db;\n      },\n      get collection() {\n        return collection;\n      },\n      get addDoc() {\n        return addDoc;\n      },\n      get onSnapshot() {\n        return onSnapshot;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useStore","onMounted","db","collection","addDoc","onSnapshot","store","snapshot","forEach","docUsuario","data","gmail","state","token","id","commit","idUser","saldo","receita","gasto","title","text","date","String","Date","link","unread"],"sources":["C:/Users/PC/Documents/GitHub/daskfinances/src/components/FirebaseData/ReceberDados.vue"],"sourcesContent":["<template>\r\n  <div />\r\n</template>\r\n\r\n<script setup>\r\nimport { useStore } from 'vuex';\r\nimport { onMounted } from 'vue';\r\nimport { db } from '@/firebase'\r\nimport { collection, addDoc, onSnapshot } from \"firebase/firestore\";\r\n\r\nconst store = useStore()\r\n\r\nonMounted(async () => {\r\n\r\n  onSnapshot(collection(db, \"usuarios\"), (snapshot) => {\r\n    snapshot.forEach((docUsuario) => {\r\n      // Criar novo saldo\r\n      if (docUsuario.data().gmail === store.state.token.gmail) {\r\n        if (store.state.token.id === '') {\r\n          store.state.token.id = docUsuario.id\r\n          store.commit('addToken',store.state.token)\r\n\r\n          addDoc(collection(db,'saldo'), {\r\n            idUser: docUsuario.id,\r\n            saldo: 0,\r\n            receita: 0,\r\n            gasto: 0\r\n          })\r\n\r\n          addDoc(collection(db, \"notifications\"), {\r\n            idUser: docUsuario.id,\r\n            title: 'DaskFinances',\r\n            text: 'Aproveite nossa plataforma 100% gratuita!',\r\n            date: String(new Date()),\r\n            link: '/',\r\n            unread: true\r\n          });\r\n        }\r\n      }\r\n    })\r\n  });\r\n})\r\n\r\n</script>"],"mappings":"AAKA,SAASA,QAAQ,QAAQ,MAAM;AAC/B,SAASC,SAAS,QAAQ,KAAK;AAC/B,SAASC,EAAE,QAAQ,YAAY;AAC/B,SAASC,UAAU,EAAEC,MAAM,EAAEC,UAAU,QAAQ,oBAAoB;;;;;;;IAEnE,MAAMC,KAAK,GAAGN,QAAQ,CAAC,CAAC;IAExBC,SAAS,CAAC,YAAY;MAEpBI,UAAU,CAACF,UAAU,CAACD,EAAE,EAAE,UAAU,CAAC,EAAGK,QAAQ,IAAK;QACnDA,QAAQ,CAACC,OAAO,CAAEC,UAAU,IAAK;UAC/B;UACA,IAAIA,UAAU,CAACC,IAAI,CAAC,CAAC,CAACC,KAAK,KAAKL,KAAK,CAACM,KAAK,CAACC,KAAK,CAACF,KAAK,EAAE;YACvD,IAAIL,KAAK,CAACM,KAAK,CAACC,KAAK,CAACC,EAAE,KAAK,EAAE,EAAE;cAC/BR,KAAK,CAACM,KAAK,CAACC,KAAK,CAACC,EAAE,GAAGL,UAAU,CAACK,EAAE;cACpCR,KAAK,CAACS,MAAM,CAAC,UAAU,EAACT,KAAK,CAACM,KAAK,CAACC,KAAK,CAAC;cAE1CT,MAAM,CAACD,UAAU,CAACD,EAAE,EAAC,OAAO,CAAC,EAAE;gBAC7Bc,MAAM,EAAEP,UAAU,CAACK,EAAE;gBACrBG,KAAK,EAAE,CAAC;gBACRC,OAAO,EAAE,CAAC;gBACVC,KAAK,EAAE;cACT,CAAC,CAAC;cAEFf,MAAM,CAACD,UAAU,CAACD,EAAE,EAAE,eAAe,CAAC,EAAE;gBACtCc,MAAM,EAAEP,UAAU,CAACK,EAAE;gBACrBM,KAAK,EAAE,cAAc;gBACrBC,IAAI,EAAE,2CAA2C;gBACjDC,IAAI,EAAEC,MAAM,CAAC,IAAIC,IAAI,CAAC,CAAC,CAAC;gBACxBC,IAAI,EAAE,GAAG;gBACTC,MAAM,EAAE;cACV,CAAC,CAAC;YACJ;UACF;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}