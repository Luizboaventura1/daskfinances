{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-46b35b01\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"d-flex justify-center align-center\"\n};\nconst _hoisted_2 = {\n  class: \"elevation-10 rounded-lg py-3 px-4\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-white text-center mb-5\"\n}, \"Login\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"mb-4\"\n};\nconst _hoisted_5 = {\n  class: \"mb-6\"\n};\nconst _hoisted_6 = {\n  class: \"w-100 text-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  const _component_v_progress_linear = _resolveComponent(\"v-progress-linear\");\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_dialog = _resolveComponent(\"v-dialog\");\n  const _component_v_app = _resolveComponent(\"v-app\");\n  return _openBlock(), _createBlock(_component_v_app, {\n    class: \"theme\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"header\", _hoisted_1, [_createVNode(_component_v_container, {\n      class: \"d-flex justify-center align-center\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"form\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_v_text_field, {\n        label: \"Email\",\n        modelValue: $setup.gmail,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.gmail = $event),\n        class: \"text-white w-100 border-0 pa-2 rounded\",\n        type: \"email\",\n        placeholder: \"Seu email\",\n        rules: $setup.emailRules\n      }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode($setup[\"ErrorInputLogin\"], {\n        statePopup: $setup.stateErrorInputGmail\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" Gmail incorreto! \")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"statePopup\"])]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_v_text_field, {\n        label: \"Senha\",\n        modelValue: $setup.senha,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.senha = $event),\n        class: \"text-white w-100 border-0 pa-2 rounded\",\n        type: \"password\",\n        placeholder: \"Sua senha\",\n        rules: $setup.passwordRules\n      }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode($setup[\"ErrorInputLogin\"], {\n        statePopup: $setup.stateErrorInputPassword\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" Senha incorreta! \")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"statePopup\"])]), _createVNode(_component_v_btn, {\n        disabled: $setup.loader,\n        loading: $setup.loader,\n        onClick: _cache[2] || (_cache[2] = $event => $setup.logarUsuario()),\n        class: \"w-100 my-3 button-entrar\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Entrar\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"disabled\", \"loading\"]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_router_link, {\n        class: \"link-registrar text-decoration-none font-weight-light\",\n        to: \"/auth/registrar\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Não tem uma conta?\")]),\n        _: 1 /* STABLE */\n      })])])]),\n\n      _: 1 /* STABLE */\n    })]), _createVNode(_component_v_dialog, {\n      modelValue: $setup.loader,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.loader = $event),\n      scrim: false,\n      persistent: \"\",\n      width: \"auto\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_v_card, {\n        color: \"blue-darken-1\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_card_text, null, {\n          default: _withCtx(() => [_createTextVNode(\" Entrando \"), _createVNode(_component_v_progress_linear, {\n            indeterminate: \"\",\n            color: \"white\",\n            class: \"mb-0\"\n          })]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createVNode($setup[\"AlertPopupPanel\"], {\n      statePopupPanel: $setup.statePopupPanel\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.textPopupPanel), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"statePopupPanel\"])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createElementVNode","_createBlock","_component_v_app","_hoisted_1","_createVNode","_component_v_container","_hoisted_2","_hoisted_3","_hoisted_4","_component_v_text_field","label","$setup","gmail","$event","type","placeholder","rules","emailRules","statePopup","stateErrorInputGmail","_hoisted_5","senha","passwordRules","stateErrorInputPassword","_component_v_btn","disabled","loader","loading","onClick","_cache","logarUsuario","_hoisted_6","_component_router_link","to","_component_v_dialog","scrim","persistent","width","_component_v_card","color","_component_v_card_text","_component_v_progress_linear","indeterminate","statePopupPanel","textPopupPanel"],"sources":["C:\\Users\\PC\\Documents\\GitHub\\daskfinances\\src\\views\\auth\\LoginView.vue"],"sourcesContent":["<template>\r\n  <v-app class=\"theme\">\r\n    <header class=\"d-flex justify-center align-center\">\r\n      <v-container class=\"d-flex justify-center align-center\">\r\n        <form class=\"elevation-10 rounded-lg py-3 px-4\">\r\n          <h1 class=\"text-white text-center mb-5\">Login</h1>\r\n          <div class=\"mb-4\">\r\n            <v-text-field\r\n              label=\"Email\"\r\n              v-model=\"gmail\"\r\n              class=\"text-white w-100 border-0 pa-2 rounded\"\r\n              type=\"email\"\r\n              placeholder=\"Seu email\"\r\n              :rules=\"emailRules\"\r\n            ></v-text-field>\r\n            <ErrorInputLogin\r\n              :statePopup=\"stateErrorInputGmail\"\r\n            >\r\n              Gmail incorreto!\r\n            </ErrorInputLogin>\r\n          </div>\r\n          <div class=\"mb-6\">\r\n            <v-text-field\r\n              label=\"Senha\"\r\n              v-model=\"senha\"\r\n              class=\"text-white w-100 border-0 pa-2 rounded\"\r\n              type=\"password\"\r\n              placeholder=\"Sua senha\"\r\n              :rules=\"passwordRules\"\r\n            ></v-text-field>\r\n            <ErrorInputLogin\r\n              :statePopup=\"stateErrorInputPassword\"\r\n            >\r\n              Senha incorreta!\r\n            </ErrorInputLogin>\r\n          </div>\r\n          <v-btn\r\n          :disabled=\"loader\"\r\n          :loading=\"loader\"\r\n          @click=\"logarUsuario()\"\r\n          class=\"w-100 my-3 button-entrar\"\r\n          >Entrar</v-btn>\r\n          <div class=\"w-100 text-center\">\r\n            <router-link\r\n            class=\"link-registrar text-decoration-none font-weight-light\"\r\n            to=\"/auth/registrar\">Não tem uma conta?</router-link>\r\n          </div>\r\n        </form>\r\n      </v-container>\r\n    </header>\r\n    <v-dialog\r\n        v-model=\"loader\"\r\n        :scrim=\"false\"\r\n        persistent\r\n        width=\"auto\"\r\n      >\r\n        <v-card\r\n          color=\"blue-darken-1\"\r\n        >\r\n          <v-card-text>\r\n            Entrando\r\n            <v-progress-linear\r\n              indeterminate\r\n              color=\"white\"\r\n              class=\"mb-0\"\r\n            ></v-progress-linear>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-dialog>\r\n    <AlertPopupPanel\r\n      :statePopupPanel=\"statePopupPanel\"\r\n    >\r\n      {{ textPopupPanel }}\r\n    </AlertPopupPanel>\r\n  </v-app>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport { db } from '@/firebase'\r\nimport { collection, onSnapshot} from \"firebase/firestore\";\r\nimport { onMounted } from 'vue';\r\nimport ErrorInputLogin from '@/components/Popups/ErrorLogin/ErrorInputLogin.vue';\r\nimport AlertPopupPanel from '@/components/Popups/PanelPopups/AlertPopupPanel.vue';\r\n\r\nlet AllUsers = ref([])\r\n\r\nonMounted(async () => {\r\n  onSnapshot(collection(db, \"usuarios\"), (snapshot) => {\r\n    snapshot.forEach((docUser) => {\r\n      const user = {\r\n        id: docUser.id,\r\n        nome: docUser.data().nome,\r\n        gmail: docUser.data().gmail,\r\n        senha: docUser.data().senha\r\n      }\r\n\r\n      AllUsers.value.push(user)\r\n    })\r\n  });\r\n})\r\n\r\nlet gmail = ref('')\r\nlet senha = ref('')\r\n\r\nlet store = useStore()\r\nlet router = useRouter()\r\n\r\nconst logarUsuario = () => {\r\n  let gmailValue = gmail.value.trim()\r\n  let senhaValue = senha.value.trim()\r\n\r\n  if(gmailValue != '' && senhaValue != '') {\r\n    //Verifica se tem uma conta existente\r\n    let verificarSeAContaExiste = AllUsers.value.find(user => {\r\n      if(user.gmail === gmailValue && user.senha === senhaValue) {\r\n        return true\r\n      }\r\n\r\n      return false\r\n    })\r\n\r\n    let gmailUser = AllUsers.value.find((item) => item.gmail == gmailValue)\r\n    let senhaUser = AllUsers.value.find((item) => item.senha == senhaValue)\r\n    let nomeUser = AllUsers.value.find((item) => {\r\n      if(item.gmail == gmailValue)\r\n        return item.nome\r\n    })\r\n\r\n    if(verificarSeAContaExiste) {\r\n      loader.value = true\r\n      setTimeout(() => {\r\n        loader.value = false\r\n        router.push('/painel')\r\n      },900)\r\n\r\n      const token = {\r\n        id: gmailUser.id,\r\n        nome: nomeUser.nome,\r\n        gmail: gmailUser.gmail,\r\n        senha: senhaUser.senha,\r\n        tokenOn: true\r\n      }\r\n\r\n      store.commit('addToken',token)\r\n    }else {\r\n      alertPopupPanel('Conta não encontrada!')\r\n    }\r\n  }else {\r\n    ErrorInputs(gmail.value,senha.value)\r\n  }\r\n}\r\n\r\n// Loader\r\n\r\nlet loader = ref(false)\r\n\r\n// Popups\r\n\r\nlet stateErrorInputGmail = ref(false)\r\nlet stateErrorInputPassword = ref(false)\r\n\r\nconst ErrorInputs = (gmail,password) => {\r\n\r\n  if(gmail === '') {\r\n    stateErrorInputGmail.value = true\r\n  }\r\n\r\n  if(password === '') {\r\n    stateErrorInputPassword.value = true\r\n  }\r\n\r\n}\r\n\r\nlet statePopupPanel = ref(false)\r\nlet textPopupPanel = ref('')\r\n\r\nconst alertPopupPanel = (msg) => {\r\n  statePopupPanel.value = true\r\n  textPopupPanel.value = msg\r\n\r\n  setTimeout(() => {\r\n    statePopupPanel.value = false\r\n  },2000)\r\n}\r\n\r\n// Rules login\r\n\r\nconst emailRules = [\r\n    value => {\r\n      if(value)\r\n        return true\r\n      return 'Email obrigatório!'\r\n    },\r\n    value => {\r\n      if(value.includes('@'))\r\n        return true\r\n      return 'Email inválido!'\r\n    },\r\n  ]\r\n\r\nconst passwordRules = [\r\n  value => {\r\n    if(value)\r\n      return true\r\n    return 'Senha obrigatória!'\r\n  }\r\n]\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  header {\r\n    height: 100vh;\r\n    background-color: #17191c;\r\n\r\n    form {\r\n      width: 100%;\r\n      max-width: 400px;\r\n      min-height: 300px;\r\n      background-color: #25272c;\r\n\r\n      input {\r\n        outline: none;\r\n        background-color: #17191c;\r\n      }\r\n\r\n      .link-registrar {\r\n        color: #959595;\r\n        font-size: 15px;\r\n\r\n        &:hover {\r\n          color: #949494;\r\n          text-decoration: underline !important;\r\n        }\r\n      }\r\n\r\n      .button-entrar {\r\n        background-color: #00b2ff;\r\n        color: white;\r\n        box-shadow: none;\r\n\r\n        &:hover {\r\n          box-shadow: 0 0 10px #0084ff65;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>"],"mappings":";;;EAEYA,KAAK,EAAC;AAAoC;;EAExCA,KAAK,EAAC;AAAmC;gEAC7CC,mBAAA,CAAkD;EAA9CD,KAAK,EAAC;AAA6B,GAAC,OAAK;;EACxCA,KAAK,EAAC;AAAM;;EAeZA,KAAK,EAAC;AAAM;;EAqBZA,KAAK,EAAC;AAAmB;;;;;;;;;;;uBAzCtCE,YAAA,CAyEQC,gBAAA;IAzEDH,KAAK,EAAC;EAAO;sBAClB,MA+CS,CA/CTC,mBAAA,CA+CS,UA/CTG,UA+CS,GA9CPC,YAAA,CA6CcC,sBAAA;MA7CDN,KAAK,EAAC;IAAoC;wBACrD,MA2CO,CA3CPC,mBAAA,CA2CO,QA3CPM,UA2CO,GA1CLC,UAAkD,EAClDP,mBAAA,CAcM,OAdNQ,UAcM,GAbJJ,YAAA,CAOgBK,uBAAA;QANdC,KAAK,EAAC,OAAO;oBACJC,MAAA,CAAAC,KAAK;mEAALD,MAAA,CAAAC,KAAK,GAAAC,MAAA;QACdd,KAAK,EAAC,wCAAwC;QAC9Ce,IAAI,EAAC,OAAO;QACZC,WAAW,EAAC,WAAW;QACtBC,KAAK,EAAEL,MAAA,CAAAM;+CAEVb,YAAA,CAIkBO,MAAA;QAHfO,UAAU,EAAEP,MAAA,CAAAQ;MAAoB;0BAClC,MAED,C,iBAFC,oBAED,E;;2CAEFnB,mBAAA,CAcM,OAdNoB,UAcM,GAbJhB,YAAA,CAOgBK,uBAAA;QANdC,KAAK,EAAC,OAAO;oBACJC,MAAA,CAAAU,KAAK;mEAALV,MAAA,CAAAU,KAAK,GAAAR,MAAA;QACdd,KAAK,EAAC,wCAAwC;QAC9Ce,IAAI,EAAC,UAAU;QACfC,WAAW,EAAC,WAAW;QACtBC,KAAK,EAAEL,MAAA,CAAAW;+CAEVlB,YAAA,CAIkBO,MAAA;QAHfO,UAAU,EAAEP,MAAA,CAAAY;MAAuB;0BACrC,MAED,C,iBAFC,oBAED,E;;2CAEFnB,YAAA,CAKeoB,gBAAA;QAJdC,QAAQ,EAAEd,MAAA,CAAAe,MAAM;QAChBC,OAAO,EAAEhB,MAAA,CAAAe,MAAM;QACfE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAhB,MAAA,IAAEF,MAAA,CAAAmB,YAAY;QACpB/B,KAAK,EAAC;;0BACL,MAAM,C,iBAAN,QAAM,E;;kDACPC,mBAAA,CAIM,OAJN+B,UAIM,GAHJ3B,YAAA,CAEqD4B,sBAAA;QADrDjC,KAAK,EAAC,uDAAuD;QAC7DkC,EAAE,EAAC;;0BAAkB,MAAkB,C,iBAAlB,oBAAkB,E;;;;;UAK/C7B,YAAA,CAkBa8B,mBAAA;kBAjBAvB,MAAA,CAAAe,MAAM;iEAANf,MAAA,CAAAe,MAAM,GAAAb,MAAA;MACdsB,KAAK,EAAE,KAAK;MACbC,UAAU,EAAV,EAAU;MACVC,KAAK,EAAC;;wBAEN,MAWS,CAXTjC,YAAA,CAWSkC,iBAAA;QAVPC,KAAK,EAAC;MAAe;0BAErB,MAOc,CAPdnC,YAAA,CAOcoC,sBAAA;4BAPD,MAEX,C,iBAFW,YAEX,GAAApC,YAAA,CAIqBqC,4BAAA;YAHnBC,aAAa,EAAb,EAAa;YACbH,KAAK,EAAC,OAAO;YACbxC,KAAK,EAAC;;;;;;;;;uCAKhBK,YAAA,CAIkBO,MAAA;MAHfgC,eAAe,EAAEhC,MAAA,CAAAgC;IAAe;wBAEjC,MAAoB,C,kCAAjBhC,MAAA,CAAAiC,cAAc,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}