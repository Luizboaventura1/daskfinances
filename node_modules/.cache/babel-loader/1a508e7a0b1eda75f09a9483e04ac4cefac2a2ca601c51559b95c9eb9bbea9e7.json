{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-52182705\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"d-flex justify-center align-center\"\n};\nconst _hoisted_2 = {\n  class: \"elevation-10 rounded-lg py-3 px-4\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-white text-center mb-5\"\n}, \"Registrar\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"w-100 text-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  const _component_v_progress_linear = _resolveComponent(\"v-progress-linear\");\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_dialog = _resolveComponent(\"v-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"header\", _hoisted_1, [_createVNode(_component_v_container, {\n    class: \"d-flex justify-center align-center\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"form\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", null, [_createVNode(_component_v_text_field, {\n      required: \"\",\n      label: \"Nome\",\n      modelValue: $setup.nome,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.nome = $event),\n      class: \"text-white w-100 border-0 pa-2 rounded\",\n      type: \"email\",\n      placeholder: \"Primeiro nome\",\n      rules: $setup.nameRules,\n      variant: \"outlined\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", null, [_createVNode(_component_v_text_field, {\n      label: \"Email\",\n      required: \"\",\n      modelValue: $setup.gmail,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.gmail = $event),\n      class: \"text-white w-100 border-0 pa-2 rounded\",\n      type: \"email\",\n      placeholder: \"Seu email\",\n      rules: $setup.emailRules,\n      variant: \"outlined\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", null, [_createVNode(_component_v_text_field, {\n      label: \"Senha\",\n      required: \"\",\n      modelValue: $setup.senha,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.senha = $event),\n      class: \"text-white w-100 border-0 pa-2 rounded\",\n      type: \"password\",\n      placeholder: \"Sua senha\",\n      rules: $setup.passwordRules,\n      variant: \"outlined\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"])]), _createVNode(_component_v_btn, {\n      disabled: $setup.loader,\n      loading: $setup.loader,\n      onClick: _cache[3] || (_cache[3] = $event => $setup.registrarUsuario()),\n      class: \"w-100 my-3 button-registrar\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Criar conta\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"disabled\", \"loading\"]), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_router_link, {\n      class: \"link-registrar text-decoration-none font-weight-light\",\n      to: \"/auth/login\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Tem uma conta?\")]),\n      _: 1 /* STABLE */\n    })])])]),\n\n    _: 1 /* STABLE */\n  })]), _createVNode(_component_v_dialog, {\n    modelValue: $setup.loader,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.loader = $event),\n    scrim: false,\n    persistent: \"\",\n    width: \"auto\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_card, {\n      color: \"blue-darken-1\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [_createTextVNode(\" Registrando \"), _createVNode(_component_v_progress_linear, {\n          indeterminate: \"\",\n          color: \"white\",\n          class: \"mb-0\"\n        })]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createVNode($setup[\"AlertPopupPanel\"], {\n    statePopupPanel: $setup.statePopupPanel\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.textPopupPanel), 1 /* TEXT */)]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"statePopupPanel\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_1","_createVNode","_component_v_container","_hoisted_2","_hoisted_3","_component_v_text_field","required","label","$setup","nome","$event","type","placeholder","rules","nameRules","variant","gmail","emailRules","senha","passwordRules","_component_v_btn","disabled","loader","loading","onClick","_cache","registrarUsuario","_hoisted_4","_component_router_link","to","_component_v_dialog","scrim","persistent","width","_component_v_card","color","_component_v_card_text","_component_v_progress_linear","indeterminate","statePopupPanel","textPopupPanel"],"sources":["C:\\Users\\PC\\Documents\\GitHub\\daskfinances\\src\\views\\auth\\RegistrarView.vue"],"sourcesContent":["<template>\r\n  <header class=\"d-flex justify-center align-center\">\r\n    <v-container class=\"d-flex justify-center align-center\">\r\n      <form class=\"elevation-10 rounded-lg py-3 px-4\">\r\n        <h1 class=\"text-white text-center mb-5\">Registrar</h1>\r\n\r\n        <div>\r\n          <v-text-field\r\n            required\r\n            label=\"Nome\"\r\n            v-model=\"nome\"\r\n            class=\"text-white w-100 border-0 pa-2 rounded\"\r\n            type=\"email\"\r\n            placeholder=\"Primeiro nome\"\r\n            :rules=\"nameRules\"\r\n            variant=\"outlined\"\r\n          ></v-text-field>\r\n        </div>\r\n\r\n        <div>\r\n          <v-text-field\r\n            label=\"Email\"\r\n            required\r\n            v-model=\"gmail\"\r\n            class=\"text-white w-100 border-0 pa-2 rounded\"\r\n            type=\"email\"\r\n            placeholder=\"Seu email\"\r\n            :rules=\"emailRules\"\r\n            variant=\"outlined\"\r\n          ></v-text-field>\r\n        </div>\r\n\r\n        <div>\r\n          <v-text-field\r\n            label=\"Senha\"\r\n            required\r\n            v-model=\"senha\"\r\n            class=\"text-white w-100 border-0 pa-2 rounded\"\r\n            type=\"password\"\r\n            placeholder=\"Sua senha\"\r\n            :rules=\"passwordRules\"\r\n            variant=\"outlined\"\r\n          ></v-text-field>\r\n        </div>\r\n\r\n        <v-btn\r\n        :disabled=\"loader\"\r\n        :loading=\"loader\"\r\n        @click=\"registrarUsuario()\"\r\n        class=\"w-100 my-3 button-registrar\"\r\n        >Criar conta</v-btn>\r\n\r\n        <div class=\"w-100 text-center\">\r\n          <router-link\r\n          class=\"link-registrar text-decoration-none font-weight-light\"\r\n          to=\"/auth/login\">Tem uma conta?</router-link>\r\n        </div>\r\n      </form>\r\n    </v-container>\r\n  </header>\r\n\r\n  <v-dialog\r\n      v-model=\"loader\"\r\n      :scrim=\"false\"\r\n      persistent\r\n      width=\"auto\"\r\n    >\r\n      <v-card\r\n        color=\"blue-darken-1\"\r\n      >\r\n        <v-card-text>\r\n          Registrando\r\n          <v-progress-linear\r\n            indeterminate\r\n            color=\"white\"\r\n            class=\"mb-0\"\r\n          ></v-progress-linear>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-dialog>\r\n  <AlertPopupPanel\r\n    :statePopupPanel=\"statePopupPanel\"\r\n  >\r\n    {{ textPopupPanel }}\r\n  </AlertPopupPanel>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { db } from '@/firebase'\r\nimport { collection, addDoc, onSnapshot } from \"firebase/firestore\";\r\nimport { useRouter } from 'vue-router';\r\nimport { onMounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport AlertPopupPanel from '@/components/Popups/PanelPopups/AlertPopupPanel.vue';\r\n//import { getAuth,createUserWithEmailAndPassword } from 'firebase/auth';\r\n\r\n/* Auth\r\nconst auth = getAuth()\r\n\r\nconst registerUser = () => {\r\n  createUserWithEmailAndPassword(auth,'luiz2123@gmail.com','233784').then(user => {\r\n    console.log(user.user)\r\n  }).catch(error => [\r\n    console.log(error)\r\n  ])\r\n}\r\n*/\r\n//==================================\r\n\r\nconst store = useStore()\r\n\r\nlet AllUsers = ref([])\r\n\r\nonMounted(async () => {\r\n  onSnapshot(collection(db, \"usuarios\"), (snapshot) => {\r\n    snapshot.forEach((user) => {\r\n      const obj = {\r\n        id: user.id,\r\n         nome: user.data().nome,\r\n        gmail: user.data().gmail,\r\n        senha: user.data().senha\r\n      }\r\n\r\n      AllUsers.value.push(obj)\r\n    })\r\n  });\r\n})\r\n\r\nlet nome = ref('')\r\nlet gmail = ref('')\r\nlet senha = ref('')\r\n\r\nlet router = useRouter()\r\n\r\nconst registrarUsuario = () => {\r\n  let nomeValue = nome.value.trim()\r\n  let gmailValue = gmail.value.trim()\r\n  let senhaValue = senha.value.trim()\r\n\r\n  if(confirmRules) {\r\n\r\n    let verificarSeAContaExiste = AllUsers.value.some(user => user.gmail.startsWith(gmailValue))\r\n    \r\n    if(!verificarSeAContaExiste) {\r\n      loader.value = true\r\n      setTimeout(() => {\r\n        loader.value = false\r\n        router.push('/painel')\r\n      },900)\r\n      \r\n      addDoc(collection(db, \"usuarios\"), {\r\n        nome: nomeValue,\r\n        gmail: gmailValue,\r\n        senha: senhaValue\r\n      });\r\n\r\n      store.commit('addToken',{\r\n        id: '',\r\n        nome: nomeValue,\r\n        gmail: gmailValue,\r\n        senha: senhaValue,\r\n        tokenOn: true\r\n      })\r\n\r\n    }else {\r\n      alertPopupPanel('Essa conta já existe!')\r\n    }\r\n  }\r\n}\r\n\r\n// Loader\r\n\r\nlet loader = ref(false)\r\n\r\n// Popups\r\n\r\nlet statePopupPanel = ref(false)\r\nlet textPopupPanel = ref('')\r\n\r\nconst alertPopupPanel = (msg) => {\r\n  statePopupPanel.value = true\r\n  textPopupPanel.value = msg\r\n\r\n  setTimeout(() => {\r\n    statePopupPanel.value = false\r\n  },2000)\r\n}\r\n\r\n// Rules login\r\n\r\nconst nameRules = ref([\r\n  value => {\r\n    if(value)\r\n      return true\r\n    return 'Senha obrigatória!'\r\n  },\r\n  value => {\r\n    if(value.length >= 3) \r\n      return true\r\n    return 'Minimo 3 letras'\r\n  }\r\n])\r\n\r\nconst emailRules = ref([\r\n  value => {\r\n    if(value)\r\n      return true\r\n    return 'Email obrigatório!'\r\n  },\r\n  value => {\r\n    if(value.includes('@'))\r\n      return true\r\n    return 'Email inválido!'\r\n  },\r\n])\r\n\r\nconst passwordRules = ref([\r\n  value => {\r\n    if(value)\r\n      return true\r\n    return 'Senha obrigatória!'\r\n  },\r\n  value => {\r\n    if(value.length >= 8)\r\n      return true\r\n    return 'Minimo 8 caracteres'\r\n  }\r\n])\r\n\r\nconst confirmRules = () => {\r\n  if(\r\n    nameRules.value[0] && nameRules.value[1] &&\r\n    emailRules.value[0] && emailRules.value[1] &&\r\n    passwordRules.value[0] && passwordRules.value[1]\r\n  ) return true\r\n\r\n  return false\r\n}\r\n\r\n// Add notification\r\n\r\nconst notification = {\r\n  idUser: store.token.id,\r\n  title: 'DaskFinances',\r\n  text: 'Aproveite nossa plataforma 100% gratuita!',\r\n  date\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n  header {\r\n    height: 100vh;\r\n    background-color: #17191c;\r\n\r\n    form {\r\n      width: 100%;\r\n      max-width: 400px;\r\n      min-height: 350px;\r\n      background-color: #25272c;\r\n\r\n      input {\r\n        outline: none;\r\n        background-color: #17191c;\r\n      }\r\n\r\n      .link-registrar {\r\n        color: #959595;\r\n        font-size: 15px;\r\n\r\n        &:hover {\r\n          color: #949494;\r\n          text-decoration: underline !important;\r\n        }\r\n      }\r\n\r\n      .button-registrar {\r\n        background-color: #00b2ff;\r\n        color: white;\r\n        box-shadow: none;\r\n\r\n        &:hover {\r\n          box-shadow: 0 0 10px #0084ff65;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>"],"mappings":";;;EACUA,KAAK,EAAC;AAAoC;;EAExCA,KAAK,EAAC;AAAmC;gEAC7CC,mBAAA,CAAsD;EAAlDD,KAAK,EAAC;AAA6B,GAAC,WAAS;;EAgD5CA,KAAK,EAAC;AAAmB;;;;;;;;;;6DAnDpCC,mBAAA,CA0DS,UA1DTC,UA0DS,GAzDPC,YAAA,CAwDcC,sBAAA;IAxDDJ,KAAK,EAAC;EAAoC;sBACrD,MAsDO,CAtDPC,mBAAA,CAsDO,QAtDPI,UAsDO,GArDLC,UAAsD,EAEtDL,mBAAA,CAWM,cAVJE,YAAA,CASgBI,uBAAA;MARdC,QAAQ,EAAR,EAAQ;MACRC,KAAK,EAAC,MAAM;kBACHC,MAAA,CAAAC,IAAI;iEAAJD,MAAA,CAAAC,IAAI,GAAAC,MAAA;MACbZ,KAAK,EAAC,wCAAwC;MAC9Ca,IAAI,EAAC,OAAO;MACZC,WAAW,EAAC,eAAe;MAC1BC,KAAK,EAAEL,MAAA,CAAAM,SAAS;MACjBC,OAAO,EAAC;wDAIZhB,mBAAA,CAWM,cAVJE,YAAA,CASgBI,uBAAA;MARdE,KAAK,EAAC,OAAO;MACbD,QAAQ,EAAR,EAAQ;kBACCE,MAAA,CAAAQ,KAAK;iEAALR,MAAA,CAAAQ,KAAK,GAAAN,MAAA;MACdZ,KAAK,EAAC,wCAAwC;MAC9Ca,IAAI,EAAC,OAAO;MACZC,WAAW,EAAC,WAAW;MACtBC,KAAK,EAAEL,MAAA,CAAAS,UAAU;MAClBF,OAAO,EAAC;wDAIZhB,mBAAA,CAWM,cAVJE,YAAA,CASgBI,uBAAA;MARdE,KAAK,EAAC,OAAO;MACbD,QAAQ,EAAR,EAAQ;kBACCE,MAAA,CAAAU,KAAK;iEAALV,MAAA,CAAAU,KAAK,GAAAR,MAAA;MACdZ,KAAK,EAAC,wCAAwC;MAC9Ca,IAAI,EAAC,UAAU;MACfC,WAAW,EAAC,WAAW;MACtBC,KAAK,EAAEL,MAAA,CAAAW,aAAa;MACrBJ,OAAO,EAAC;wDAIZd,YAAA,CAKoBmB,gBAAA;MAJnBC,QAAQ,EAAEb,MAAA,CAAAc,MAAM;MAChBC,OAAO,EAAEf,MAAA,CAAAc,MAAM;MACfE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAf,MAAA,IAAEF,MAAA,CAAAkB,gBAAgB;MACxB5B,KAAK,EAAC;;wBACL,MAAW,C,iBAAX,aAAW,E;;gDAEZC,mBAAA,CAIM,OAJN4B,UAIM,GAHJ1B,YAAA,CAE6C2B,sBAAA;MAD7C9B,KAAK,EAAC,uDAAuD;MAC7D+B,EAAE,EAAC;;wBAAc,MAAc,C,iBAAd,gBAAc,E;;;;;QAMvC5B,YAAA,CAkBa6B,mBAAA;gBAjBAtB,MAAA,CAAAc,MAAM;+DAANd,MAAA,CAAAc,MAAM,GAAAZ,MAAA;IACdqB,KAAK,EAAE,KAAK;IACbC,UAAU,EAAV,EAAU;IACVC,KAAK,EAAC;;sBAEN,MAWS,CAXThC,YAAA,CAWSiC,iBAAA;MAVPC,KAAK,EAAC;IAAe;wBAErB,MAOc,CAPdlC,YAAA,CAOcmC,sBAAA;0BAPD,MAEX,C,iBAFW,eAEX,GAAAnC,YAAA,CAIqBoC,4BAAA;UAHnBC,aAAa,EAAb,EAAa;UACbH,KAAK,EAAC,OAAO;UACbrC,KAAK,EAAC;;;;;;;;;qCAKhBG,YAAA,CAIkBO,MAAA;IAHf+B,eAAe,EAAE/B,MAAA,CAAA+B;EAAe;sBAEjC,MAAoB,C,kCAAjB/B,MAAA,CAAAgC,cAAc,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}