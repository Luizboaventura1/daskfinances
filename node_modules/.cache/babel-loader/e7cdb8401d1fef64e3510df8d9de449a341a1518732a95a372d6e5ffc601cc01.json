{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { db } from '@/firebase';\nimport { collection, addDoc, onSnapshot } from \"firebase/firestore\";\nimport { useRouter } from 'vue-router';\nimport { onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport ErrorInputLogin from '@/components/Popups/ErrorLogin/ErrorInputLogin.vue';\nimport AlertPopupPanel from '@/components/Popups/PanelPopups/AlertPopupPanel.vue';\nimport { getAuth, createUserWithEmailAndPassword } from 'firebase/auth';\n\n// Auth\n\nexport default {\n  __name: 'RegistrarView',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const auth = getAuth();\n    const registerUser = () => {\n      createUserWithEmailAndPassword(auth, 'luiz23@gmail.com', '233784').then(user => {\n        console.log(user.user);\n      }).catch(error => [console.log(error)]);\n    };\n    const userUID = auth().currentUser.uid;\n    console.log(userUID);\n    //==================================\n\n    const store = useStore();\n    let AllUsers = ref([]);\n    onMounted(async () => {\n      onSnapshot(collection(db, \"usuarios\"), snapshot => {\n        snapshot.forEach(user => {\n          const obj = {\n            id: user.id,\n            nome: user.data().nome,\n            gmail: user.data().gmail,\n            senha: user.data().senha\n          };\n          AllUsers.value.push(obj);\n        });\n      });\n    });\n    let nome = ref('');\n    let gmail = ref('');\n    let senha = ref('');\n    let router = useRouter();\n    const registrarUsuario = () => {\n      let nomeValue = nome.value.trim();\n      let gmailValue = gmail.value.trim();\n      let senhaValue = senha.value.trim();\n      if (nomeValue != '' && gmailValue != '' && senhaValue != '') {\n        let verificarSeAContaExiste = AllUsers.value.some(user => user.gmail.startsWith(gmailValue));\n        if (!verificarSeAContaExiste) {\n          loader.value = true;\n          setTimeout(() => {\n            loader.value = false;\n            router.push('/painel');\n          }, 900);\n          addDoc(collection(db, \"usuarios\"), {\n            nome: nomeValue,\n            gmail: gmailValue,\n            senha: senhaValue\n          });\n          store.commit('addToken', {\n            id: '',\n            nome: nomeValue,\n            gmail: gmailValue,\n            senha: senhaValue,\n            tokenOn: true\n          });\n        } else {\n          alertPopupPanel('Essa conta já existe!');\n        }\n      } else {\n        ErrorInputs(nome.value, gmail.value, senha.value);\n      }\n    };\n\n    // Loader\n\n    let loader = ref(false);\n\n    // Popups\n\n    let stateErrorInputName = ref(false);\n    let stateErrorInputGmail = ref(false);\n    let stateErrorInputPassword = ref(false);\n    const ErrorInputs = (name, gmail, password) => {\n      if (name === '') {\n        stateErrorInputName.value = true;\n      }\n      if (gmail === '') {\n        stateErrorInputGmail.value = true;\n      }\n      if (password === '') {\n        stateErrorInputPassword.value = true;\n      }\n    };\n    let statePopupPanel = ref(false);\n    let textPopupPanel = ref('');\n    const alertPopupPanel = msg => {\n      statePopupPanel.value = true;\n      textPopupPanel.value = msg;\n      setTimeout(() => {\n        statePopupPanel.value = false;\n      }, 2000);\n    };\n    const __returned__ = {\n      auth,\n      registerUser,\n      userUID,\n      store,\n      get AllUsers() {\n        return AllUsers;\n      },\n      set AllUsers(v) {\n        AllUsers = v;\n      },\n      get nome() {\n        return nome;\n      },\n      set nome(v) {\n        nome = v;\n      },\n      get gmail() {\n        return gmail;\n      },\n      set gmail(v) {\n        gmail = v;\n      },\n      get senha() {\n        return senha;\n      },\n      set senha(v) {\n        senha = v;\n      },\n      get router() {\n        return router;\n      },\n      set router(v) {\n        router = v;\n      },\n      registrarUsuario,\n      get loader() {\n        return loader;\n      },\n      set loader(v) {\n        loader = v;\n      },\n      get stateErrorInputName() {\n        return stateErrorInputName;\n      },\n      set stateErrorInputName(v) {\n        stateErrorInputName = v;\n      },\n      get stateErrorInputGmail() {\n        return stateErrorInputGmail;\n      },\n      set stateErrorInputGmail(v) {\n        stateErrorInputGmail = v;\n      },\n      get stateErrorInputPassword() {\n        return stateErrorInputPassword;\n      },\n      set stateErrorInputPassword(v) {\n        stateErrorInputPassword = v;\n      },\n      ErrorInputs,\n      get statePopupPanel() {\n        return statePopupPanel;\n      },\n      set statePopupPanel(v) {\n        statePopupPanel = v;\n      },\n      get textPopupPanel() {\n        return textPopupPanel;\n      },\n      set textPopupPanel(v) {\n        textPopupPanel = v;\n      },\n      alertPopupPanel,\n      ref,\n      get db() {\n        return db;\n      },\n      get collection() {\n        return collection;\n      },\n      get addDoc() {\n        return addDoc;\n      },\n      get onSnapshot() {\n        return onSnapshot;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      onMounted,\n      get useStore() {\n        return useStore;\n      },\n      ErrorInputLogin,\n      AlertPopupPanel,\n      get getAuth() {\n        return getAuth;\n      },\n      get createUserWithEmailAndPassword() {\n        return createUserWithEmailAndPassword;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","db","collection","addDoc","onSnapshot","useRouter","onMounted","useStore","ErrorInputLogin","AlertPopupPanel","getAuth","createUserWithEmailAndPassword","auth","registerUser","then","user","console","log","catch","error","userUID","currentUser","uid","store","AllUsers","snapshot","forEach","obj","id","nome","data","gmail","senha","value","push","router","registrarUsuario","nomeValue","trim","gmailValue","senhaValue","verificarSeAContaExiste","some","startsWith","loader","setTimeout","commit","tokenOn","alertPopupPanel","ErrorInputs","stateErrorInputName","stateErrorInputGmail","stateErrorInputPassword","name","password","statePopupPanel","textPopupPanel","msg"],"sources":["C:/Users/PC/Documents/GitHub/daskfinances/src/views/auth/RegistrarView.vue"],"sourcesContent":["<template>\r\n  <header class=\"d-flex justify-center align-center\">\r\n    <v-container class=\"d-flex justify-center align-center\">\r\n      <form class=\"elevation-10 rounded-lg py-3 px-4\">\r\n        <h1 class=\"text-white text-center mb-5\">Registrar</h1>\r\n\r\n        <div class=\"mb-4\">\r\n          <input\r\n          required\r\n          v-model=\"nome\"\r\n          class=\"text-white w-100 border-0 pa-2 rounded\"\r\n          type=\"email\"\r\n          placeholder=\"Primeiro nome\">\r\n          <ErrorInputLogin\r\n            :statePopup=\"stateErrorInputName\"\r\n          >\r\n            Preencha corretamente!\r\n          </ErrorInputLogin>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n          <input\r\n          required\r\n          v-model=\"gmail\"\r\n          class=\"text-white w-100 border-0 pa-2 rounded\"\r\n          type=\"email\"\r\n          placeholder=\"Seu email\">\r\n          <ErrorInputLogin\r\n            :statePopup=\"stateErrorInputGmail\"\r\n          >\r\n            Preencha corretamente!\r\n          </ErrorInputLogin>\r\n        </div>\r\n\r\n        <div class=\"mb-6\">\r\n          <input\r\n          required\r\n          v-model=\"senha\"\r\n          class=\"text-white w-100 border-0 pa-2 rounded\"\r\n          type=\"password\"\r\n          placeholder=\"Sua senha\">\r\n          <ErrorInputLogin\r\n            :statePopup=\"stateErrorInputPassword\"\r\n          >\r\n            Preencha corretamente!\r\n          </ErrorInputLogin>\r\n        </div>\r\n\r\n        <v-btn\r\n        :disabled=\"loader\"\r\n        :loading=\"loader\"\r\n        @click=\"registrarUsuario()\"\r\n        class=\"w-100 my-3 button-registrar\"\r\n        >Criar conta</v-btn>\r\n\r\n        <div class=\"w-100 text-center\">\r\n          <router-link\r\n          class=\"link-registrar text-decoration-none font-weight-light\"\r\n          to=\"/auth/login\">Tem uma conta?</router-link>\r\n        </div>\r\n      </form>\r\n    </v-container>\r\n  </header>\r\n\r\n  <v-dialog\r\n      v-model=\"loader\"\r\n      :scrim=\"false\"\r\n      persistent\r\n      width=\"auto\"\r\n    >\r\n      <v-card\r\n        color=\"blue-darken-1\"\r\n      >\r\n        <v-card-text>\r\n          Registrando\r\n          <v-progress-linear\r\n            indeterminate\r\n            color=\"white\"\r\n            class=\"mb-0\"\r\n          ></v-progress-linear>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-dialog>\r\n  <AlertPopupPanel\r\n    :statePopupPanel=\"statePopupPanel\"\r\n  >\r\n    {{ textPopupPanel }}\r\n  </AlertPopupPanel>\r\n  <v-btn class=\"bg-blue-accent-3 py-2 px-6\" @click=\"registerUser\">register</v-btn>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { db } from '@/firebase'\r\nimport { collection, addDoc, onSnapshot } from \"firebase/firestore\";\r\nimport { useRouter } from 'vue-router';\r\nimport { onMounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport ErrorInputLogin from '@/components/Popups/ErrorLogin/ErrorInputLogin.vue';\r\nimport AlertPopupPanel from '@/components/Popups/PanelPopups/AlertPopupPanel.vue';\r\nimport { getAuth,createUserWithEmailAndPassword } from 'firebase/auth';\r\n\r\n// Auth\r\nconst auth = getAuth()\r\n\r\nconst registerUser = () => {\r\n  createUserWithEmailAndPassword(auth,'luiz23@gmail.com','233784').then(user => {\r\n    console.log(user.user)\r\n  }).catch(error => [\r\n    console.log(error)\r\n  ])\r\n}\r\nconst userUID = auth().currentUser.uid;\r\nconsole.log(userUID)\r\n//==================================\r\n\r\nconst store = useStore()\r\n\r\nlet AllUsers = ref([])\r\n\r\nonMounted(async () => {\r\n  onSnapshot(collection(db, \"usuarios\"), (snapshot) => {\r\n    snapshot.forEach((user) => {\r\n      const obj = {\r\n        id: user.id,\r\n         nome: user.data().nome,\r\n        gmail: user.data().gmail,\r\n        senha: user.data().senha\r\n      }\r\n\r\n      AllUsers.value.push(obj)\r\n    })\r\n  });\r\n})\r\n\r\nlet nome = ref('')\r\nlet gmail = ref('')\r\nlet senha = ref('')\r\n\r\nlet router = useRouter()\r\n\r\nconst registrarUsuario = () => {\r\n  let nomeValue = nome.value.trim()\r\n  let gmailValue = gmail.value.trim()\r\n  let senhaValue = senha.value.trim()\r\n\r\n  if(nomeValue != '' && gmailValue != '' && senhaValue != '') {\r\n\r\n    let verificarSeAContaExiste = AllUsers.value.some(user => user.gmail.startsWith(gmailValue))\r\n    \r\n    if(!verificarSeAContaExiste) {\r\n      loader.value = true\r\n      setTimeout(() => {\r\n        loader.value = false\r\n        router.push('/painel')\r\n      },900)\r\n      \r\n      addDoc(collection(db, \"usuarios\"), {\r\n        nome: nomeValue,\r\n        gmail: gmailValue,\r\n        senha: senhaValue\r\n      });\r\n\r\n      store.commit('addToken',{\r\n        id: '',\r\n        nome: nomeValue,\r\n        gmail: gmailValue,\r\n        senha: senhaValue,\r\n        tokenOn: true\r\n      })\r\n\r\n    }else {\r\n      alertPopupPanel('Essa conta já existe!')\r\n    }\r\n  }else {\r\n    ErrorInputs(nome.value,gmail.value,senha.value)\r\n  }\r\n}\r\n\r\n\r\n// Loader\r\n\r\nlet loader = ref(false)\r\n\r\n// Popups\r\n\r\nlet stateErrorInputName = ref(false)\r\nlet stateErrorInputGmail = ref(false)\r\nlet stateErrorInputPassword = ref(false)\r\n\r\nconst ErrorInputs = (name,gmail,password) => {\r\n  if(name === '') {\r\n    stateErrorInputName.value = true\r\n  }\r\n\r\n  if(gmail === '') {\r\n    stateErrorInputGmail.value = true\r\n  }\r\n\r\n  if(password === '') {\r\n    stateErrorInputPassword.value = true\r\n  }\r\n\r\n}\r\n\r\nlet statePopupPanel = ref(false)\r\nlet textPopupPanel = ref('')\r\n\r\nconst alertPopupPanel = (msg) => {\r\n  statePopupPanel.value = true\r\n  textPopupPanel.value = msg\r\n\r\n  setTimeout(() => {\r\n    statePopupPanel.value = false\r\n  },2000)\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n  header {\r\n    height: 100vh;\r\n    background-color: #17191c;\r\n\r\n    form {\r\n      width: 100%;\r\n      max-width: 400px;\r\n      min-height: 350px;\r\n      background-color: #25272c;\r\n\r\n      input {\r\n        outline: none;\r\n        background-color: #17191c;\r\n      }\r\n\r\n      .link-registrar {\r\n        color: #959595;\r\n        font-size: 15px;\r\n\r\n        &:hover {\r\n          color: #949494;\r\n          text-decoration: underline !important;\r\n        }\r\n      }\r\n\r\n      .button-registrar {\r\n        background-color: #00b2ff;\r\n        color: white;\r\n        box-shadow: none;\r\n\r\n        &:hover {\r\n          box-shadow: 0 0 10px #0084ff65;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}