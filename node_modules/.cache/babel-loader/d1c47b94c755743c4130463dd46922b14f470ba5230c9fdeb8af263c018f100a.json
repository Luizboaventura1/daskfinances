{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { db } from '@/firebase';\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport { onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { ref } from 'vue';\nexport default {\n  __name: 'MonthlyExpenseRoot',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const store = useStore();\n    const token = store.state.token;\n    let AllTransactions = ref([]);\n    let monthlyExpense = ref(0);\n    onMounted(async () => {\n      onSnapshot(collection(db, \"transacoes\"), snapshot => {\n        snapshot.forEach(docTransaction => {\n          if (token.id === docTransaction.data().idUser) {\n            const transactionDate = new Date(docTransaction.data().data.replace(/\\//g, '-'));\n            const currentDate = new Date();\n            if (transactionDate.getMonth() === currentDate.getMonth() && transactionDate.getFullYear() === currentDate.getFullYear()) {\n              if (tr) monthlyExpense.value += Number(docTransaction.data().valor);\n            }\n            AllTransactions.value.push({\n              id: docTransaction.id,\n              nome: docTransaction.data().nome,\n              valor: docTransaction.data().valor,\n              tipo: docTransaction.data().tipo,\n              data: new Date(docTransaction.data().data.replace(/\\//g, '-')),\n              idUser: docTransaction.data().idUser\n            });\n          }\n        });\n      });\n    });\n    const formatValue = number => {\n      return `R$ ${Number(number).toFixed(2).replace('.', ',')}`;\n    };\n    const currentMonth = () => {\n      const months = [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"];\n      let currentMonth = new Date().getMonth();\n      return months[currentMonth];\n    };\n    console.log(currentMonth());\n    const __returned__ = {\n      store,\n      token,\n      get AllTransactions() {\n        return AllTransactions;\n      },\n      set AllTransactions(v) {\n        AllTransactions = v;\n      },\n      get monthlyExpense() {\n        return monthlyExpense;\n      },\n      set monthlyExpense(v) {\n        monthlyExpense = v;\n      },\n      formatValue,\n      currentMonth,\n      get db() {\n        return db;\n      },\n      get collection() {\n        return collection;\n      },\n      get onSnapshot() {\n        return onSnapshot;\n      },\n      onMounted,\n      get useStore() {\n        return useStore;\n      },\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["db","collection","onSnapshot","onMounted","useStore","ref","store","token","state","AllTransactions","monthlyExpense","snapshot","forEach","docTransaction","id","data","idUser","transactionDate","Date","replace","currentDate","getMonth","getFullYear","tr","value","Number","valor","push","nome","tipo","formatValue","number","toFixed","currentMonth","months","console","log"],"sources":["C:/Users/PC/Documents/GitHub/daskfinances/src/components/Chart/MonthlyIncome/MonthlyExpenseRoot.vue"],"sourcesContent":["<!--\r\n                        [\\    /]   |-------    ]------\r\n                        [ \\  / ]   |______     ]\r\n                        [  \\/  ]    ______|    ]______\r\n-->\r\n<template>\r\n  <div class=\"container-chart w-100 pa-3 rounded-lg elevation-6\">\r\n    <nav class=\"d-flex align-center justify-space-between\">\r\n      <span class=\"text-red-accent-3 font-weight-bold\">Gasto</span>\r\n      <span class=\"text-white\">{{ currentMonth() }}</span>\r\n    </nav>\r\n\r\n    <main class=\" d-flex justify-center align-center\">\r\n      <span class=\"text-white font-weight-bold text-h5\">{{ formatValue(monthlyExpense) }}</span>\r\n    </main>\r\n\r\n    <v-divider></v-divider>\r\n\r\n    <footer class=\"d-flex justify-center align-center\">\r\n      <span class=\"text-grey-lighten-1\">Total gasto esse mês</span>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { db } from '@/firebase'\r\nimport { collection, onSnapshot} from \"firebase/firestore\";\r\nimport { onMounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { ref } from 'vue';\r\n\r\nconst store = useStore()\r\nconst token = store.state.token\r\n\r\nlet AllTransactions = ref([])\r\nlet monthlyExpense = ref(0)\r\n\r\nonMounted(async () => {\r\n  onSnapshot(collection(db, \"transacoes\"), (snapshot) => {\r\n    snapshot.forEach((docTransaction) => {\r\n      if(token.id === docTransaction.data().idUser) {\r\n\r\n        const transactionDate = new Date(docTransaction.data().data.replace(/\\//g,'-'))\r\n        const currentDate = new Date\r\n\r\n        if (transactionDate.getMonth() === currentDate.getMonth() &&\r\n          transactionDate.getFullYear() === currentDate.getFullYear()\r\n        ) {\r\n          if (tr)\r\n          monthlyExpense.value += Number(docTransaction.data().valor)\r\n        }\r\n\r\n        AllTransactions.value.push({\r\n          id: docTransaction.id,\r\n          nome: docTransaction.data().nome,\r\n          valor: docTransaction.data().valor,\r\n          tipo: docTransaction.data().tipo,\r\n          data: new Date(docTransaction.data().data.replace(/\\//g,'-')),\r\n          idUser: docTransaction.data().idUser\r\n        })\r\n\r\n      }\r\n    })\r\n  });\r\n})\r\n\r\nconst formatValue = (number) => {\r\n  return `R$ ${Number(number).toFixed(2).replace('.',',')}`\r\n}\r\n\r\nconst currentMonth = () => {\r\n  const months = [\r\n    \"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\",\r\n    \"Maio\", \"Junho\", \"Julho\", \"Agosto\",\r\n    \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"\r\n  ]\r\n\r\n  let currentMonth = new Date().getMonth()\r\n\r\n  return months[currentMonth]\r\n}\r\n\r\nconsole.log(currentMonth())\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$main-background: #17191c;\r\n$secondary-color: #25272c;\r\n\r\n.container-chart {\r\n  background-color: $secondary-color;\r\n  height: 250px;\r\n\r\n  nav {\r\n    height: 10%;\r\n  }\r\n\r\n  main {\r\n    height: 70%;\r\n  }\r\n\r\n  footer {\r\n    height: 20%;\r\n  }\r\n}\r\n</style>"],"mappings":";AAyBA,SAASA,EAAE,QAAQ,YAAY;AAC/B,SAASC,UAAU,EAAEC,UAAU,QAAO,oBAAoB;AAC1D,SAASC,SAAS,QAAQ,KAAK;AAC/B,SAASC,QAAQ,QAAQ,MAAM;AAC/B,SAASC,GAAG,QAAQ,KAAK;;;;;;;IAEzB,MAAMC,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,KAAK,GAAGD,KAAK,CAACE,KAAK,CAACD,KAAK;IAE/B,IAAIE,eAAe,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC7B,IAAIK,cAAc,GAAGL,GAAG,CAAC,CAAC,CAAC;IAE3BF,SAAS,CAAC,YAAY;MACpBD,UAAU,CAACD,UAAU,CAACD,EAAE,EAAE,YAAY,CAAC,EAAGW,QAAQ,IAAK;QACrDA,QAAQ,CAACC,OAAO,CAAEC,cAAc,IAAK;UACnC,IAAGN,KAAK,CAACO,EAAE,KAAKD,cAAc,CAACE,IAAI,CAAC,CAAC,CAACC,MAAM,EAAE;YAE5C,MAAMC,eAAe,GAAG,IAAIC,IAAI,CAACL,cAAc,CAACE,IAAI,CAAC,CAAC,CAACA,IAAI,CAACI,OAAO,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC;YAC/E,MAAMC,WAAW,GAAG,IAAIF,IAAI,CAAD,CAAC;YAE5B,IAAID,eAAe,CAACI,QAAQ,CAAC,CAAC,KAAKD,WAAW,CAACC,QAAQ,CAAC,CAAC,IACvDJ,eAAe,CAACK,WAAW,CAAC,CAAC,KAAKF,WAAW,CAACE,WAAW,CAAC,CAAC,EAC3D;cACA,IAAIC,EAAE,EACNb,cAAc,CAACc,KAAK,IAAIC,MAAM,CAACZ,cAAc,CAACE,IAAI,CAAC,CAAC,CAACW,KAAK,CAAC;YAC7D;YAEAjB,eAAe,CAACe,KAAK,CAACG,IAAI,CAAC;cACzBb,EAAE,EAAED,cAAc,CAACC,EAAE;cACrBc,IAAI,EAAEf,cAAc,CAACE,IAAI,CAAC,CAAC,CAACa,IAAI;cAChCF,KAAK,EAAEb,cAAc,CAACE,IAAI,CAAC,CAAC,CAACW,KAAK;cAClCG,IAAI,EAAEhB,cAAc,CAACE,IAAI,CAAC,CAAC,CAACc,IAAI;cAChCd,IAAI,EAAE,IAAIG,IAAI,CAACL,cAAc,CAACE,IAAI,CAAC,CAAC,CAACA,IAAI,CAACI,OAAO,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC;cAC7DH,MAAM,EAAEH,cAAc,CAACE,IAAI,CAAC,CAAC,CAACC;YAChC,CAAC,CAAC;UAEJ;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,MAAMc,WAAW,GAAIC,MAAM,IAAK;MAC9B,OAAQ,MAAKN,MAAM,CAACM,MAAM,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAACb,OAAO,CAAC,GAAG,EAAC,GAAG,CAAE,EAAC;IAC3D,CAAC;IAED,MAAMc,YAAY,GAAGA,CAAA,KAAM;MACzB,MAAMC,MAAM,GAAG,CACb,SAAS,EAAE,WAAW,EAAE,OAAO,EAAE,OAAO,EACxC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAClC,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,CAC9C;MAED,IAAID,YAAY,GAAG,IAAIf,IAAI,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC;MAExC,OAAOa,MAAM,CAACD,YAAY,CAAC;IAC7B,CAAC;IAEDE,OAAO,CAACC,GAAG,CAACH,YAAY,CAAC,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}