{"version":3,"file":"VDataIterator.mjs","names":["VData","VDataFooter","Mobile","Themeable","mixins","deepEqual","getObjectValueByPath","getPrefixedScopedSlots","getSlot","camelizeObjectKeys","keyCodes","breaking","removed","extend","name","props","options","itemKey","type","String","default","value","Array","singleSelect","Boolean","expanded","mobileBreakpoint","singleExpand","loading","noResultsText","noDataText","loadingText","hideDefaultFooter","footerProps","Object","selectableKey","data","selection","expansion","internalCurrentItems","shiftKeyDown","lastEntry","computed","everyItem","selectableItems","length","every","i","isSelected","someItems","some","sanitizedFooterProps","filter","item","isSelectable","watch","handler","reduce","immediate","old","keys","$emit","values","k","items","includes","created","breakingProps","forEach","_ref","original","replacement","$attrs","hasOwnProperty","removedProps","prop","mounted","window","addEventListener","onKeyDown","onKeyUp","beforeDestroy","removeEventListener","methods","e","keyCode","shift","toggleSelectAll","assign","key","select","arguments","undefined","emit","index","findIndex","x","lastEntryKey","lastEntryKeySelected","multipleSelect","start","end","currentItem","isExpanded","expand","createItemProps","v","isMobile","genEmptyWrapper","content","$createElement","genEmpty","originalItemsLength","filteredItemsLength","$slots","$vuetify","lang","t","noData","noResults","genItems","empty","pagination","itemsLength","$scopedSlots","map","genFooter","on","updateOptions","scopedSlots","genDefaultScopedSlot","outerProps","staticClass","render","$props","update:options"],"sources":["../../../src/components/VDataIterator/VDataIterator.ts"],"sourcesContent":["// @ts-nocheck\n/* eslint-disable */\n\n// Components\nimport { VData } from '../VData'\nimport VDataFooter from './VDataFooter'\n\n// Mixins\nimport Mobile from '../../mixins/mobile'\nimport Themeable from '../../mixins/themeable'\n\n// Helpers\nimport mixins from '../../util/mixins'\nimport { deepEqual, getObjectValueByPath, getPrefixedScopedSlots, getSlot, camelizeObjectKeys, keyCodes } from '../../util/helpers'\nimport { breaking, removed } from '../../util/console'\n\n// Types\nimport { VNode, VNodeChildren } from 'vue'\nimport { PropValidator } from 'vue/types/options'\nimport { DataItemProps, DataScopeProps } from 'vuetify/types'\n\n/* @vue/component */\nexport default mixins(\n  Mobile,\n  Themeable\n).extend({\n  name: 'v-data-iterator',\n\n  props: {\n    ...VData.options.props, // TODO: filter out props not used\n    itemKey: {\n      type: String,\n      default: 'id',\n    },\n    value: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<any[]>,\n    singleSelect: Boolean,\n    expanded: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<any[]>,\n    mobileBreakpoint: {\n      ...Mobile.options.props.mobileBreakpoint,\n      default: 600,\n    },\n    singleExpand: Boolean,\n    loading: [Boolean, String],\n    noResultsText: {\n      type: String,\n      default: '$vuetify.dataIterator.noResultsText',\n    },\n    noDataText: {\n      type: String,\n      default: '$vuetify.noDataText',\n    },\n    loadingText: {\n      type: String,\n      default: '$vuetify.dataIterator.loadingText',\n    },\n    hideDefaultFooter: Boolean,\n    footerProps: Object,\n    selectableKey: {\n      type: String,\n      default: 'isSelectable',\n    },\n  },\n\n  data: () => ({\n    selection: {} as Record<string, any>,\n    expansion: {} as Record<string, boolean>,\n    internalCurrentItems: [] as any[],\n    shiftKeyDown: false,\n    lastEntry: -1,\n  }),\n\n  computed: {\n    everyItem (): boolean {\n      return !!this.selectableItems.length && this.selectableItems.every((i: any) => this.isSelected(i))\n    },\n    someItems (): boolean {\n      return this.selectableItems.some((i: any) => this.isSelected(i))\n    },\n    sanitizedFooterProps (): Record<string, any> {\n      return camelizeObjectKeys(this.footerProps)\n    },\n    selectableItems (): any[] {\n      return this.internalCurrentItems.filter(item => this.isSelectable(item))\n    },\n  },\n\n  watch: {\n    value: {\n      handler (value: any[]) {\n        this.selection = value.reduce((selection, item) => {\n          selection[getObjectValueByPath(item, this.itemKey)] = item\n          return selection\n        }, {})\n      },\n      immediate: true,\n    },\n    selection (value: Record<string, boolean>, old: Record<string, boolean>) {\n      if (deepEqual(Object.keys(value), Object.keys(old))) return\n\n      this.$emit('input', Object.values(value))\n    },\n    expanded: {\n      handler (value: any[]) {\n        this.expansion = value.reduce((expansion, item) => {\n          expansion[getObjectValueByPath(item, this.itemKey)] = true\n          return expansion\n        }, {})\n      },\n      immediate: true,\n    },\n    expansion (value: Record<string, boolean>, old: Record<string, boolean>) {\n      if (deepEqual(value, old)) return\n      const keys = Object.keys(value).filter(k => value[k])\n      const expanded = !keys.length ? [] : this.items.filter(i => keys.includes(String(getObjectValueByPath(i, this.itemKey))))\n      this.$emit('update:expanded', expanded)\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['disable-initial-sort', 'sort-by'],\n      ['filter', 'custom-filter'],\n      ['pagination', 'options'],\n      ['total-items', 'server-items-length'],\n      ['hide-actions', 'hide-default-footer'],\n      ['rows-per-page-items', 'footer-props.items-per-page-options'],\n      ['rows-per-page-text', 'footer-props.items-per-page-text'],\n      ['prev-icon', 'footer-props.prev-icon'],\n      ['next-icon', 'footer-props.next-icon'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n\n    const removedProps = [\n      'expand',\n      'content-class',\n      'content-props',\n      'content-tag',\n    ]\n\n    /* istanbul ignore next */\n    removedProps.forEach(prop => {\n      if (this.$attrs.hasOwnProperty(prop)) removed(prop)\n    })\n  },\n\n  mounted () {\n    window.addEventListener('keydown', this.onKeyDown)\n    window.addEventListener('keyup', this.onKeyUp)\n  },\n  beforeDestroy () {\n    window.removeEventListener('keydown', this.onKeyDown)\n    window.removeEventListener('keyup', this.onKeyUp)\n  },\n\n  methods: {\n    onKeyDown (e: KeyboardEvent): void {\n      if (e.keyCode !== keyCodes.shift) return\n      this.shiftKeyDown = true\n    },\n    onKeyUp (e: KeyboardEvent): void {\n      if (e.keyCode !== keyCodes.shift) return\n      this.shiftKeyDown = false\n    },\n    toggleSelectAll (value: boolean): void {\n      const selection = Object.assign({}, this.selection)\n\n      for (let i = 0; i < this.selectableItems.length; i++) {\n        const item = this.selectableItems[i]\n\n        if (!this.isSelectable(item)) continue\n\n        const key = getObjectValueByPath(item, this.itemKey)\n        if (value) selection[key] = item\n        else delete selection[key]\n      }\n\n      this.selection = selection\n      this.$emit('toggle-select-all', { items: this.internalCurrentItems, value })\n    },\n    isSelectable (item: any): boolean {\n      return getObjectValueByPath(item, this.selectableKey) !== false\n    },\n    isSelected (item: any): boolean {\n      return !!this.selection[getObjectValueByPath(item, this.itemKey)] || false\n    },\n    select (item: any, value = true, emit = true): void {\n      if (!this.isSelectable(item)) return\n\n      const selection = this.singleSelect ? {} : Object.assign({}, this.selection)\n      const key = getObjectValueByPath(item, this.itemKey)\n\n      if (value) selection[key] = item\n      else delete selection[key]\n\n      const index = this.selectableItems.findIndex(x => getObjectValueByPath(x, this.itemKey) === key)\n      if (this.lastEntry === -1) this.lastEntry = index\n      else if (this.shiftKeyDown && !this.singleSelect && emit) {\n        const lastEntryKey = getObjectValueByPath(this.selectableItems[this.lastEntry], this.itemKey)\n        const lastEntryKeySelected = Object.keys(this.selection).includes(String(lastEntryKey))\n        this.multipleSelect(lastEntryKeySelected, emit, selection, index)\n      }\n      this.lastEntry = index\n\n      if (this.singleSelect && emit) {\n        const keys = Object.keys(this.selection)\n        const old = keys.length && getObjectValueByPath(this.selection[keys[0]], this.itemKey)\n        old && old !== key && this.$emit('item-selected', { item: this.selection[old], value: false })\n      }\n      this.selection = selection\n      emit && this.$emit('item-selected', { item, value })\n    },\n    multipleSelect (value = true, emit = true, selection: any, index: number): void {\n      const start = index < this.lastEntry ? index : this.lastEntry\n      const end = index < this.lastEntry ? this.lastEntry : index\n      for (let i = start; i <= end; i++) {\n        const currentItem = this.selectableItems[i]\n        const key = getObjectValueByPath(currentItem, this.itemKey)\n        if (value) selection[key] = currentItem\n        else delete selection[key]\n        emit && this.$emit('item-selected', { currentItem, value })\n      }\n    },\n    isExpanded (item: any): boolean {\n      return this.expansion[getObjectValueByPath(item, this.itemKey)] || false\n    },\n    expand (item: any, value = true): void {\n      const expansion = this.singleExpand ? {} : Object.assign({}, this.expansion)\n      const key = getObjectValueByPath(item, this.itemKey)\n\n      if (value) expansion[key] = true\n      else delete expansion[key]\n\n      this.expansion = expansion\n      this.$emit('item-expanded', { item, value })\n    },\n    createItemProps (item: any, index: number): DataItemProps {\n      return {\n        item,\n        index,\n        select: (v: boolean) => this.select(item, v),\n        isSelected: this.isSelected(item),\n        expand: (v: boolean) => this.expand(item, v),\n        isExpanded: this.isExpanded(item),\n        isMobile: this.isMobile,\n      }\n    },\n    genEmptyWrapper (content: VNodeChildren) {\n      return this.$createElement('div', content)\n    },\n    genEmpty (originalItemsLength: number, filteredItemsLength: number) {\n      if (originalItemsLength === 0 && this.loading) {\n        const loading = this.$slots.loading || this.$vuetify.lang.t(this.loadingText)\n        return this.genEmptyWrapper(loading)\n      } else if (originalItemsLength === 0) {\n        const noData = this.$slots['no-data'] || this.$vuetify.lang.t(this.noDataText)\n        return this.genEmptyWrapper(noData)\n      } else if (filteredItemsLength === 0) {\n        const noResults = this.$slots['no-results'] || this.$vuetify.lang.t(this.noResultsText)\n        return this.genEmptyWrapper(noResults)\n      }\n\n      return null\n    },\n    genItems (props: DataScopeProps) {\n      const empty = this.genEmpty(props.originalItemsLength, props.pagination.itemsLength)\n      if (empty) return [empty]\n\n      if (this.$scopedSlots.default) {\n        return this.$scopedSlots.default({\n          ...props,\n          isSelected: this.isSelected,\n          select: this.select,\n          isExpanded: this.isExpanded,\n          isMobile: this.isMobile,\n          expand: this.expand,\n        })\n      }\n\n      if (this.$scopedSlots.item) {\n        return props.items.map((item: any, index) => this.$scopedSlots.item!(this.createItemProps(\n          item,\n          index\n        )))\n      }\n\n      return []\n    },\n    genFooter (props: DataScopeProps) {\n      if (this.hideDefaultFooter) return null\n\n      const data = {\n        props: {\n          ...this.sanitizedFooterProps,\n          options: props.options,\n          pagination: props.pagination,\n        },\n        on: {\n          'update:options': (value: any) => props.updateOptions(value),\n        },\n      }\n\n      const scopedSlots = getPrefixedScopedSlots('footer.', this.$scopedSlots)\n\n      return this.$createElement(VDataFooter, {\n        scopedSlots,\n        ...data,\n      })\n    },\n    genDefaultScopedSlot (props: any) {\n      const outerProps = {\n        ...props,\n        someItems: this.someItems,\n        everyItem: this.everyItem,\n        toggleSelectAll: this.toggleSelectAll,\n      }\n\n      return this.$createElement('div', {\n        staticClass: 'v-data-iterator',\n      }, [\n        getSlot(this, 'header', outerProps, true),\n        this.genItems(props),\n        this.genFooter(props),\n        getSlot(this, 'footer', outerProps, true),\n      ])\n    },\n  },\n\n  render (): VNode {\n    return this.$createElement(VData, {\n      props: this.$props,\n      on: {\n        'update:options': (v: any, old: any) => !deepEqual(v, old) && this.$emit('update:options', v),\n        'update:page': (v: any) => this.$emit('update:page', v),\n        'update:items-per-page': (v: any) => this.$emit('update:items-per-page', v),\n        'update:sort-by': (v: any) => this.$emit('update:sort-by', v),\n        'update:sort-desc': (v: any) => this.$emit('update:sort-desc', v),\n        'update:group-by': (v: any) => this.$emit('update:group-by', v),\n        'update:group-desc': (v: any) => this.$emit('update:group-desc', v),\n        pagination: (v: any, old: any) => !deepEqual(v, old) && this.$emit('pagination', v),\n        'current-items': (v: any[]) => {\n          this.internalCurrentItems = v\n          this.$emit('current-items', v)\n        },\n        'page-count': (v: number) => this.$emit('page-count', v),\n      },\n      scopedSlots: {\n        default: this.genDefaultScopedSlot,\n      },\n    })\n  },\n})\n"],"mappings":"AAAA;AACA;AAEA;AAAA,SACSA,KAAK;AAAA,OACPC,WAAW,2BAElB;AAAA,OACOC,MAAM;AAAA,OACNC,SAAS,oCAEhB;AAAA,OACOC,MAAM;AAAA,SACJC,SAAS,EAAEC,oBAAoB,EAAEC,sBAAsB,EAAEC,OAAO,EAAEC,kBAAkB,EAAEC,QAAQ;AAAA,SAC9FC,QAAQ,EAAEC,OAAO,kCAE1B;AAKA;AACA,eAAeR,MAAM,CACnBF,MAAM,EACNC,SAAS,CACV,CAACU,MAAM,CAAC;EACPC,IAAI,EAAE,iBAAiB;EAEvBC,KAAK,EAAE;IACL,GAAGf,KAAK,CAACgB,OAAO,CAACD,KAAK;IAAE;IACxBE,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDC,KAAK,EAAE;MACLH,IAAI,EAAEI,KAAK;MACXF,OAAO,EAAEA,CAAA,KAAM;IACjB,CAAyB;IACzBG,YAAY,EAAEC,OAAO;IACrBC,QAAQ,EAAE;MACRP,IAAI,EAAEI,KAAK;MACXF,OAAO,EAAEA,CAAA,KAAM;IACjB,CAAyB;IACzBM,gBAAgB,EAAE;MAChB,GAAGxB,MAAM,CAACc,OAAO,CAACD,KAAK,CAACW,gBAAgB;MACxCN,OAAO,EAAE;IACX,CAAC;IACDO,YAAY,EAAEH,OAAO;IACrBI,OAAO,EAAE,CAACJ,OAAO,EAAEL,MAAM,CAAC;IAC1BU,aAAa,EAAE;MACbX,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDU,UAAU,EAAE;MACVZ,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDW,WAAW,EAAE;MACXb,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDY,iBAAiB,EAAER,OAAO;IAC1BS,WAAW,EAAEC,MAAM;IACnBC,aAAa,EAAE;MACbjB,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EAEDgB,IAAI,EAAEA,CAAA,MAAO;IACXC,SAAS,EAAE,CAAC,CAAwB;IACpCC,SAAS,EAAE,CAAC,CAA4B;IACxCC,oBAAoB,EAAE,EAAW;IACjCC,YAAY,EAAE,KAAK;IACnBC,SAAS,EAAE,CAAC;EACd,CAAC,CAAC;EAEFC,QAAQ,EAAE;IACRC,SAASA,CAAA,EAAa;MACpB,OAAO,CAAC,CAAC,IAAI,CAACC,eAAe,CAACC,MAAM,IAAI,IAAI,CAACD,eAAe,CAACE,KAAK,CAAEC,CAAM,IAAK,IAAI,CAACC,UAAU,CAACD,CAAC,CAAC,CAAC;IACpG,CAAC;IACDE,SAASA,CAAA,EAAa;MACpB,OAAO,IAAI,CAACL,eAAe,CAACM,IAAI,CAAEH,CAAM,IAAK,IAAI,CAACC,UAAU,CAACD,CAAC,CAAC,CAAC;IAClE,CAAC;IACDI,oBAAoBA,CAAA,EAAyB;MAC3C,OAAO1C,kBAAkB,CAAC,IAAI,CAACwB,WAAW,CAAC;IAC7C,CAAC;IACDW,eAAeA,CAAA,EAAW;MACxB,OAAO,IAAI,CAACL,oBAAoB,CAACa,MAAM,CAACC,IAAI,IAAI,IAAI,CAACC,YAAY,CAACD,IAAI,CAAC,CAAC;IAC1E;EACF,CAAC;EAEDE,KAAK,EAAE;IACLlC,KAAK,EAAE;MACLmC,OAAOA,CAAEnC,KAAY,EAAE;QACrB,IAAI,CAACgB,SAAS,GAAGhB,KAAK,CAACoC,MAAM,CAAC,CAACpB,SAAS,EAAEgB,IAAI,KAAK;UACjDhB,SAAS,CAAC/B,oBAAoB,CAAC+C,IAAI,EAAE,IAAI,CAACpC,OAAO,CAAC,CAAC,GAAGoC,IAAI;UAC1D,OAAOhB,SAAS;QAClB,CAAC,EAAE,CAAC,CAAC,CAAC;MACR,CAAC;MACDqB,SAAS,EAAE;IACb,CAAC;IACDrB,SAASA,CAAEhB,KAA8B,EAAEsC,GAA4B,EAAE;MACvE,IAAItD,SAAS,CAAC6B,MAAM,CAAC0B,IAAI,CAACvC,KAAK,CAAC,EAAEa,MAAM,CAAC0B,IAAI,CAACD,GAAG,CAAC,CAAC,EAAE;MAErD,IAAI,CAACE,KAAK,CAAC,OAAO,EAAE3B,MAAM,CAAC4B,MAAM,CAACzC,KAAK,CAAC,CAAC;IAC3C,CAAC;IACDI,QAAQ,EAAE;MACR+B,OAAOA,CAAEnC,KAAY,EAAE;QACrB,IAAI,CAACiB,SAAS,GAAGjB,KAAK,CAACoC,MAAM,CAAC,CAACnB,SAAS,EAAEe,IAAI,KAAK;UACjDf,SAAS,CAAChC,oBAAoB,CAAC+C,IAAI,EAAE,IAAI,CAACpC,OAAO,CAAC,CAAC,GAAG,IAAI;UAC1D,OAAOqB,SAAS;QAClB,CAAC,EAAE,CAAC,CAAC,CAAC;MACR,CAAC;MACDoB,SAAS,EAAE;IACb,CAAC;IACDpB,SAASA,CAAEjB,KAA8B,EAAEsC,GAA4B,EAAE;MACvE,IAAItD,SAAS,CAACgB,KAAK,EAAEsC,GAAG,CAAC,EAAE;MAC3B,MAAMC,IAAI,GAAG1B,MAAM,CAAC0B,IAAI,CAACvC,KAAK,CAAC,CAAC+B,MAAM,CAACW,CAAC,IAAI1C,KAAK,CAAC0C,CAAC,CAAC,CAAC;MACrD,MAAMtC,QAAQ,GAAG,CAACmC,IAAI,CAACf,MAAM,GAAG,EAAE,GAAG,IAAI,CAACmB,KAAK,CAACZ,MAAM,CAACL,CAAC,IAAIa,IAAI,CAACK,QAAQ,CAAC9C,MAAM,CAACb,oBAAoB,CAACyC,CAAC,EAAE,IAAI,CAAC9B,OAAO,CAAC,CAAC,CAAC,CAAC;MACzH,IAAI,CAAC4C,KAAK,CAAC,iBAAiB,EAAEpC,QAAQ,CAAC;IACzC;EACF,CAAC;EAEDyC,OAAOA,CAAA,EAAI;IACT,MAAMC,aAAa,GAAG,CACpB,CAAC,sBAAsB,EAAE,SAAS,CAAC,EACnC,CAAC,QAAQ,EAAE,eAAe,CAAC,EAC3B,CAAC,YAAY,EAAE,SAAS,CAAC,EACzB,CAAC,aAAa,EAAE,qBAAqB,CAAC,EACtC,CAAC,cAAc,EAAE,qBAAqB,CAAC,EACvC,CAAC,qBAAqB,EAAE,qCAAqC,CAAC,EAC9D,CAAC,oBAAoB,EAAE,kCAAkC,CAAC,EAC1D,CAAC,WAAW,EAAE,wBAAwB,CAAC,EACvC,CAAC,WAAW,EAAE,wBAAwB,CAAC,CACxC;;IAED;IACAA,aAAa,CAACC,OAAO,CAACC,IAAA,IAA6B;MAAA,IAA5B,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAAF,IAAA;MAC5C,IAAI,IAAI,CAACG,MAAM,CAACC,cAAc,CAACH,QAAQ,CAAC,EAAE3D,QAAQ,CAAC2D,QAAQ,EAAEC,WAAW,EAAE,IAAI,CAAC;IACjF,CAAC,CAAC;IAEF,MAAMG,YAAY,GAAG,CACnB,QAAQ,EACR,eAAe,EACf,eAAe,EACf,aAAa,CACd;;IAED;IACAA,YAAY,CAACN,OAAO,CAACO,IAAI,IAAI;MAC3B,IAAI,IAAI,CAACH,MAAM,CAACC,cAAc,CAACE,IAAI,CAAC,EAAE/D,OAAO,CAAC+D,IAAI,CAAC;IACrD,CAAC,CAAC;EACJ,CAAC;EAEDC,OAAOA,CAAA,EAAI;IACTC,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACC,SAAS,CAAC;IAClDF,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACE,OAAO,CAAC;EAChD,CAAC;EACDC,aAAaA,CAAA,EAAI;IACfJ,MAAM,CAACK,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACH,SAAS,CAAC;IACrDF,MAAM,CAACK,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACF,OAAO,CAAC;EACnD,CAAC;EAEDG,OAAO,EAAE;IACPJ,SAASA,CAAEK,CAAgB,EAAQ;MACjC,IAAIA,CAAC,CAACC,OAAO,KAAK3E,QAAQ,CAAC4E,KAAK,EAAE;MAClC,IAAI,CAAC9C,YAAY,GAAG,IAAI;IAC1B,CAAC;IACDwC,OAAOA,CAAEI,CAAgB,EAAQ;MAC/B,IAAIA,CAAC,CAACC,OAAO,KAAK3E,QAAQ,CAAC4E,KAAK,EAAE;MAClC,IAAI,CAAC9C,YAAY,GAAG,KAAK;IAC3B,CAAC;IACD+C,eAAeA,CAAElE,KAAc,EAAQ;MACrC,MAAMgB,SAAS,GAAGH,MAAM,CAACsD,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAACnD,SAAS,CAAC;MAEnD,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACH,eAAe,CAACC,MAAM,EAAEE,CAAC,EAAE,EAAE;QACpD,MAAMM,IAAI,GAAG,IAAI,CAACT,eAAe,CAACG,CAAC,CAAC;QAEpC,IAAI,CAAC,IAAI,CAACO,YAAY,CAACD,IAAI,CAAC,EAAE;QAE9B,MAAMoC,GAAG,GAAGnF,oBAAoB,CAAC+C,IAAI,EAAE,IAAI,CAACpC,OAAO,CAAC;QACpD,IAAII,KAAK,EAAEgB,SAAS,CAACoD,GAAG,CAAC,GAAGpC,IAAI,MAC3B,OAAOhB,SAAS,CAACoD,GAAG,CAAC;MAC5B;MAEA,IAAI,CAACpD,SAAS,GAAGA,SAAS;MAC1B,IAAI,CAACwB,KAAK,CAAC,mBAAmB,EAAE;QAAEG,KAAK,EAAE,IAAI,CAACzB,oBAAoB;QAAElB;MAAM,CAAC,CAAC;IAC9E,CAAC;IACDiC,YAAYA,CAAED,IAAS,EAAW;MAChC,OAAO/C,oBAAoB,CAAC+C,IAAI,EAAE,IAAI,CAAClB,aAAa,CAAC,KAAK,KAAK;IACjE,CAAC;IACDa,UAAUA,CAAEK,IAAS,EAAW;MAC9B,OAAO,CAAC,CAAC,IAAI,CAAChB,SAAS,CAAC/B,oBAAoB,CAAC+C,IAAI,EAAE,IAAI,CAACpC,OAAO,CAAC,CAAC,IAAI,KAAK;IAC5E,CAAC;IACDyE,MAAMA,CAAErC,IAAS,EAAmC;MAAA,IAAjChC,KAAK,GAAAsE,SAAA,CAAA9C,MAAA,QAAA8C,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;MAAA,IAAEE,IAAI,GAAAF,SAAA,CAAA9C,MAAA,QAAA8C,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;MAC1C,IAAI,CAAC,IAAI,CAACrC,YAAY,CAACD,IAAI,CAAC,EAAE;MAE9B,MAAMhB,SAAS,GAAG,IAAI,CAACd,YAAY,GAAG,CAAC,CAAC,GAAGW,MAAM,CAACsD,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAACnD,SAAS,CAAC;MAC5E,MAAMoD,GAAG,GAAGnF,oBAAoB,CAAC+C,IAAI,EAAE,IAAI,CAACpC,OAAO,CAAC;MAEpD,IAAII,KAAK,EAAEgB,SAAS,CAACoD,GAAG,CAAC,GAAGpC,IAAI,MAC3B,OAAOhB,SAAS,CAACoD,GAAG,CAAC;MAE1B,MAAMK,KAAK,GAAG,IAAI,CAAClD,eAAe,CAACmD,SAAS,CAACC,CAAC,IAAI1F,oBAAoB,CAAC0F,CAAC,EAAE,IAAI,CAAC/E,OAAO,CAAC,KAAKwE,GAAG,CAAC;MAChG,IAAI,IAAI,CAAChD,SAAS,KAAK,CAAC,CAAC,EAAE,IAAI,CAACA,SAAS,GAAGqD,KAAK,MAC5C,IAAI,IAAI,CAACtD,YAAY,IAAI,CAAC,IAAI,CAACjB,YAAY,IAAIsE,IAAI,EAAE;QACxD,MAAMI,YAAY,GAAG3F,oBAAoB,CAAC,IAAI,CAACsC,eAAe,CAAC,IAAI,CAACH,SAAS,CAAC,EAAE,IAAI,CAACxB,OAAO,CAAC;QAC7F,MAAMiF,oBAAoB,GAAGhE,MAAM,CAAC0B,IAAI,CAAC,IAAI,CAACvB,SAAS,CAAC,CAAC4B,QAAQ,CAAC9C,MAAM,CAAC8E,YAAY,CAAC,CAAC;QACvF,IAAI,CAACE,cAAc,CAACD,oBAAoB,EAAEL,IAAI,EAAExD,SAAS,EAAEyD,KAAK,CAAC;MACnE;MACA,IAAI,CAACrD,SAAS,GAAGqD,KAAK;MAEtB,IAAI,IAAI,CAACvE,YAAY,IAAIsE,IAAI,EAAE;QAC7B,MAAMjC,IAAI,GAAG1B,MAAM,CAAC0B,IAAI,CAAC,IAAI,CAACvB,SAAS,CAAC;QACxC,MAAMsB,GAAG,GAAGC,IAAI,CAACf,MAAM,IAAIvC,oBAAoB,CAAC,IAAI,CAAC+B,SAAS,CAACuB,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC3C,OAAO,CAAC;QACtF0C,GAAG,IAAIA,GAAG,KAAK8B,GAAG,IAAI,IAAI,CAAC5B,KAAK,CAAC,eAAe,EAAE;UAAER,IAAI,EAAE,IAAI,CAAChB,SAAS,CAACsB,GAAG,CAAC;UAAEtC,KAAK,EAAE;QAAM,CAAC,CAAC;MAChG;MACA,IAAI,CAACgB,SAAS,GAAGA,SAAS;MAC1BwD,IAAI,IAAI,IAAI,CAAChC,KAAK,CAAC,eAAe,EAAE;QAAER,IAAI;QAAEhC;MAAM,CAAC,CAAC;IACtD,CAAC;IACD8E,cAAcA,CAAA,EAAkE;MAAA,IAAhE9E,KAAK,GAAAsE,SAAA,CAAA9C,MAAA,QAAA8C,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;MAAA,IAAEE,IAAI,GAAAF,SAAA,CAAA9C,MAAA,QAAA8C,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;MAAA,IAAEtD,SAAc,GAAAsD,SAAA,CAAA9C,MAAA,OAAA8C,SAAA,MAAAC,SAAA;MAAA,IAAEE,KAAa,GAAAH,SAAA,CAAA9C,MAAA,OAAA8C,SAAA,MAAAC,SAAA;MACtE,MAAMQ,KAAK,GAAGN,KAAK,GAAG,IAAI,CAACrD,SAAS,GAAGqD,KAAK,GAAG,IAAI,CAACrD,SAAS;MAC7D,MAAM4D,GAAG,GAAGP,KAAK,GAAG,IAAI,CAACrD,SAAS,GAAG,IAAI,CAACA,SAAS,GAAGqD,KAAK;MAC3D,KAAK,IAAI/C,CAAC,GAAGqD,KAAK,EAAErD,CAAC,IAAIsD,GAAG,EAAEtD,CAAC,EAAE,EAAE;QACjC,MAAMuD,WAAW,GAAG,IAAI,CAAC1D,eAAe,CAACG,CAAC,CAAC;QAC3C,MAAM0C,GAAG,GAAGnF,oBAAoB,CAACgG,WAAW,EAAE,IAAI,CAACrF,OAAO,CAAC;QAC3D,IAAII,KAAK,EAAEgB,SAAS,CAACoD,GAAG,CAAC,GAAGa,WAAW,MAClC,OAAOjE,SAAS,CAACoD,GAAG,CAAC;QAC1BI,IAAI,IAAI,IAAI,CAAChC,KAAK,CAAC,eAAe,EAAE;UAAEyC,WAAW;UAAEjF;QAAM,CAAC,CAAC;MAC7D;IACF,CAAC;IACDkF,UAAUA,CAAElD,IAAS,EAAW;MAC9B,OAAO,IAAI,CAACf,SAAS,CAAChC,oBAAoB,CAAC+C,IAAI,EAAE,IAAI,CAACpC,OAAO,CAAC,CAAC,IAAI,KAAK;IAC1E,CAAC;IACDuF,MAAMA,CAAEnD,IAAS,EAAsB;MAAA,IAApBhC,KAAK,GAAAsE,SAAA,CAAA9C,MAAA,QAAA8C,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;MAC7B,MAAMrD,SAAS,GAAG,IAAI,CAACX,YAAY,GAAG,CAAC,CAAC,GAAGO,MAAM,CAACsD,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAClD,SAAS,CAAC;MAC5E,MAAMmD,GAAG,GAAGnF,oBAAoB,CAAC+C,IAAI,EAAE,IAAI,CAACpC,OAAO,CAAC;MAEpD,IAAII,KAAK,EAAEiB,SAAS,CAACmD,GAAG,CAAC,GAAG,IAAI,MAC3B,OAAOnD,SAAS,CAACmD,GAAG,CAAC;MAE1B,IAAI,CAACnD,SAAS,GAAGA,SAAS;MAC1B,IAAI,CAACuB,KAAK,CAAC,eAAe,EAAE;QAAER,IAAI;QAAEhC;MAAM,CAAC,CAAC;IAC9C,CAAC;IACDoF,eAAeA,CAAEpD,IAAS,EAAEyC,KAAa,EAAiB;MACxD,OAAO;QACLzC,IAAI;QACJyC,KAAK;QACLJ,MAAM,EAAGgB,CAAU,IAAK,IAAI,CAAChB,MAAM,CAACrC,IAAI,EAAEqD,CAAC,CAAC;QAC5C1D,UAAU,EAAE,IAAI,CAACA,UAAU,CAACK,IAAI,CAAC;QACjCmD,MAAM,EAAGE,CAAU,IAAK,IAAI,CAACF,MAAM,CAACnD,IAAI,EAAEqD,CAAC,CAAC;QAC5CH,UAAU,EAAE,IAAI,CAACA,UAAU,CAAClD,IAAI,CAAC;QACjCsD,QAAQ,EAAE,IAAI,CAACA;MACjB,CAAC;IACH,CAAC;IACDC,eAAeA,CAAEC,OAAsB,EAAE;MACvC,OAAO,IAAI,CAACC,cAAc,CAAC,KAAK,EAAED,OAAO,CAAC;IAC5C,CAAC;IACDE,QAAQA,CAAEC,mBAA2B,EAAEC,mBAA2B,EAAE;MAClE,IAAID,mBAAmB,KAAK,CAAC,IAAI,IAAI,CAACpF,OAAO,EAAE;QAC7C,MAAMA,OAAO,GAAG,IAAI,CAACsF,MAAM,CAACtF,OAAO,IAAI,IAAI,CAACuF,QAAQ,CAACC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACtF,WAAW,CAAC;QAC7E,OAAO,IAAI,CAAC6E,eAAe,CAAChF,OAAO,CAAC;MACtC,CAAC,MAAM,IAAIoF,mBAAmB,KAAK,CAAC,EAAE;QACpC,MAAMM,MAAM,GAAG,IAAI,CAACJ,MAAM,CAAC,SAAS,CAAC,IAAI,IAAI,CAACC,QAAQ,CAACC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACvF,UAAU,CAAC;QAC9E,OAAO,IAAI,CAAC8E,eAAe,CAACU,MAAM,CAAC;MACrC,CAAC,MAAM,IAAIL,mBAAmB,KAAK,CAAC,EAAE;QACpC,MAAMM,SAAS,GAAG,IAAI,CAACL,MAAM,CAAC,YAAY,CAAC,IAAI,IAAI,CAACC,QAAQ,CAACC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACxF,aAAa,CAAC;QACvF,OAAO,IAAI,CAAC+E,eAAe,CAACW,SAAS,CAAC;MACxC;MAEA,OAAO,IAAI;IACb,CAAC;IACDC,QAAQA,CAAEzG,KAAqB,EAAE;MAC/B,MAAM0G,KAAK,GAAG,IAAI,CAACV,QAAQ,CAAChG,KAAK,CAACiG,mBAAmB,EAAEjG,KAAK,CAAC2G,UAAU,CAACC,WAAW,CAAC;MACpF,IAAIF,KAAK,EAAE,OAAO,CAACA,KAAK,CAAC;MAEzB,IAAI,IAAI,CAACG,YAAY,CAACxG,OAAO,EAAE;QAC7B,OAAO,IAAI,CAACwG,YAAY,CAACxG,OAAO,CAAC;UAC/B,GAAGL,KAAK;UACRiC,UAAU,EAAE,IAAI,CAACA,UAAU;UAC3B0C,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBa,UAAU,EAAE,IAAI,CAACA,UAAU;UAC3BI,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBH,MAAM,EAAE,IAAI,CAACA;QACf,CAAC,CAAC;MACJ;MAEA,IAAI,IAAI,CAACoB,YAAY,CAACvE,IAAI,EAAE;QAC1B,OAAOtC,KAAK,CAACiD,KAAK,CAAC6D,GAAG,CAAC,CAACxE,IAAS,EAAEyC,KAAK,KAAK,IAAI,CAAC8B,YAAY,CAACvE,IAAI,CAAE,IAAI,CAACoD,eAAe,CACvFpD,IAAI,EACJyC,KAAK,CACN,CAAC,CAAC;MACL;MAEA,OAAO,EAAE;IACX,CAAC;IACDgC,SAASA,CAAE/G,KAAqB,EAAE;MAChC,IAAI,IAAI,CAACiB,iBAAiB,EAAE,OAAO,IAAI;MAEvC,MAAMI,IAAI,GAAG;QACXrB,KAAK,EAAE;UACL,GAAG,IAAI,CAACoC,oBAAoB;UAC5BnC,OAAO,EAAED,KAAK,CAACC,OAAO;UACtB0G,UAAU,EAAE3G,KAAK,CAAC2G;QACpB,CAAC;QACDK,EAAE,EAAE;UACF,gBAAgB,EAAG1G,KAAU,IAAKN,KAAK,CAACiH,aAAa,CAAC3G,KAAK;QAC7D;MACF,CAAC;MAED,MAAM4G,WAAW,GAAG1H,sBAAsB,CAAC,SAAS,EAAE,IAAI,CAACqH,YAAY,CAAC;MAExE,OAAO,IAAI,CAACd,cAAc,CAAC7G,WAAW,EAAE;QACtCgI,WAAW;QACX,GAAG7F;MACL,CAAC,CAAC;IACJ,CAAC;IACD8F,oBAAoBA,CAAEnH,KAAU,EAAE;MAChC,MAAMoH,UAAU,GAAG;QACjB,GAAGpH,KAAK;QACRkC,SAAS,EAAE,IAAI,CAACA,SAAS;QACzBN,SAAS,EAAE,IAAI,CAACA,SAAS;QACzB4C,eAAe,EAAE,IAAI,CAACA;MACxB,CAAC;MAED,OAAO,IAAI,CAACuB,cAAc,CAAC,KAAK,EAAE;QAChCsB,WAAW,EAAE;MACf,CAAC,EAAE,CACD5H,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE2H,UAAU,EAAE,IAAI,CAAC,EACzC,IAAI,CAACX,QAAQ,CAACzG,KAAK,CAAC,EACpB,IAAI,CAAC+G,SAAS,CAAC/G,KAAK,CAAC,EACrBP,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE2H,UAAU,EAAE,IAAI,CAAC,CAC1C,CAAC;IACJ;EACF,CAAC;EAEDE,MAAMA,CAAA,EAAW;IACf,OAAO,IAAI,CAACvB,cAAc,CAAC9G,KAAK,EAAE;MAChCe,KAAK,EAAE,IAAI,CAACuH,MAAM;MAClBP,EAAE,EAAE;QACF,gBAAgB,EAAEQ,CAAC7B,CAAM,EAAE/C,GAAQ,KAAK,CAACtD,SAAS,CAACqG,CAAC,EAAE/C,GAAG,CAAC,IAAI,IAAI,CAACE,KAAK,CAAC,gBAAgB,EAAE6C,CAAC,CAAC;QAC7F,aAAa,EAAGA,CAAM,IAAK,IAAI,CAAC7C,KAAK,CAAC,aAAa,EAAE6C,CAAC,CAAC;QACvD,uBAAuB,EAAGA,CAAM,IAAK,IAAI,CAAC7C,KAAK,CAAC,uBAAuB,EAAE6C,CAAC,CAAC;QAC3E,gBAAgB,EAAGA,CAAM,IAAK,IAAI,CAAC7C,KAAK,CAAC,gBAAgB,EAAE6C,CAAC,CAAC;QAC7D,kBAAkB,EAAGA,CAAM,IAAK,IAAI,CAAC7C,KAAK,CAAC,kBAAkB,EAAE6C,CAAC,CAAC;QACjE,iBAAiB,EAAGA,CAAM,IAAK,IAAI,CAAC7C,KAAK,CAAC,iBAAiB,EAAE6C,CAAC,CAAC;QAC/D,mBAAmB,EAAGA,CAAM,IAAK,IAAI,CAAC7C,KAAK,CAAC,mBAAmB,EAAE6C,CAAC,CAAC;QACnEgB,UAAU,EAAEA,CAAChB,CAAM,EAAE/C,GAAQ,KAAK,CAACtD,SAAS,CAACqG,CAAC,EAAE/C,GAAG,CAAC,IAAI,IAAI,CAACE,KAAK,CAAC,YAAY,EAAE6C,CAAC,CAAC;QACnF,eAAe,EAAGA,CAAQ,IAAK;UAC7B,IAAI,CAACnE,oBAAoB,GAAGmE,CAAC;UAC7B,IAAI,CAAC7C,KAAK,CAAC,eAAe,EAAE6C,CAAC,CAAC;QAChC,CAAC;QACD,YAAY,EAAGA,CAAS,IAAK,IAAI,CAAC7C,KAAK,CAAC,YAAY,EAAE6C,CAAC;MACzD,CAAC;MACDuB,WAAW,EAAE;QACX7G,OAAO,EAAE,IAAI,CAAC8G;MAChB;IACF,CAAC,CAAC;EACJ;AACF,CAAC,CAAC"}