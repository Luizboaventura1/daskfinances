{"version":3,"file":"items.mjs","names":["makeItemsProps","useItems","computed","getPropertyFromItem","propsFactory","makeDataTableItemProps","itemValue","add","obj","key","value","path","split","length","part","shift","useDataTableItems","props","columns","items","dataTableItems","map","item","type","reduce","column","raw"],"sources":["../../../../src/labs/VDataTable/composables/items.ts"],"sourcesContent":["// Composables\nimport { makeItemsProps, useItems } from '@/composables/items'\n\n// Utilities\nimport { computed } from 'vue'\nimport { getPropertyFromItem, propsFactory } from '@/util'\n\n// Types\nimport type { Ref } from 'vue'\nimport type { ItemProps } from '@/composables/items'\nimport type { DataTableItem, InternalDataTableHeader } from '../types'\n\nexport const makeDataTableItemProps = propsFactory({\n  // TODO: Worth it to make specific datatable implementation\n  // without title, children?\n  ...makeItemsProps({\n    itemValue: 'id',\n  }),\n}, 'v-data-table-item')\n\nfunction add (obj: Record<string, unknown>, key: string, value: unknown) {\n  const path = key.split('.')\n\n  while (path.length > 1) {\n    const part = path.shift()!\n    if (obj[part] == null) {\n      obj[part] = {}\n    }\n\n    if (typeof obj[part] === 'object') {\n      obj = obj[part] as Record<string, unknown>\n    }\n  }\n\n  obj[path[0]] = value\n}\n\nexport function useDataTableItems (props: ItemProps, columns: Ref<InternalDataTableHeader[]>) {\n  const { items } = useItems(props)\n\n  const dataTableItems = computed<DataTableItem[]>(() => items.value.map(item => {\n    return {\n      ...item,\n      type: 'item',\n      columns: columns.value.reduce((obj, column) => {\n        add(obj, column.key, getPropertyFromItem(item.raw, column.value ?? column.key))\n        return obj\n      }, {} as Record<string, unknown>),\n    }\n  }))\n\n  return { items: dataTableItems }\n}\n"],"mappings":"AAAA;AAAA,SACSA,cAAc,EAAEC,QAAQ,0CAEjC;AACA,SAASC,QAAQ,QAAQ,KAAK;AAAA,SACrBC,mBAAmB,EAAEC,YAAY,mCAE1C;AAKA,OAAO,MAAMC,sBAAsB,GAAGD,YAAY,CAAC;EACjD;EACA;EACA,GAAGJ,cAAc,CAAC;IAChBM,SAAS,EAAE;EACb,CAAC;AACH,CAAC,EAAE,mBAAmB,CAAC;AAEvB,SAASC,GAAGA,CAAEC,GAA4B,EAAEC,GAAW,EAAEC,KAAc,EAAE;EACvE,MAAMC,IAAI,GAAGF,GAAG,CAACG,KAAK,CAAC,GAAG,CAAC;EAE3B,OAAOD,IAAI,CAACE,MAAM,GAAG,CAAC,EAAE;IACtB,MAAMC,IAAI,GAAGH,IAAI,CAACI,KAAK,EAAG;IAC1B,IAAIP,GAAG,CAACM,IAAI,CAAC,IAAI,IAAI,EAAE;MACrBN,GAAG,CAACM,IAAI,CAAC,GAAG,CAAC,CAAC;IAChB;IAEA,IAAI,OAAON,GAAG,CAACM,IAAI,CAAC,KAAK,QAAQ,EAAE;MACjCN,GAAG,GAAGA,GAAG,CAACM,IAAI,CAA4B;IAC5C;EACF;EAEAN,GAAG,CAACG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGD,KAAK;AACtB;AAEA,OAAO,SAASM,iBAAiBA,CAAEC,KAAgB,EAAEC,OAAuC,EAAE;EAC5F,MAAM;IAAEC;EAAM,CAAC,GAAGlB,QAAQ,CAACgB,KAAK,CAAC;EAEjC,MAAMG,cAAc,GAAGlB,QAAQ,CAAkB,MAAMiB,KAAK,CAACT,KAAK,CAACW,GAAG,CAACC,IAAI,IAAI;IAC7E,OAAO;MACL,GAAGA,IAAI;MACPC,IAAI,EAAE,MAAM;MACZL,OAAO,EAAEA,OAAO,CAACR,KAAK,CAACc,MAAM,CAAC,CAAChB,GAAG,EAAEiB,MAAM,KAAK;QAC7ClB,GAAG,CAACC,GAAG,EAAEiB,MAAM,CAAChB,GAAG,EAAEN,mBAAmB,CAACmB,IAAI,CAACI,GAAG,EAAED,MAAM,CAACf,KAAK,IAAIe,MAAM,CAAChB,GAAG,CAAC,CAAC;QAC/E,OAAOD,GAAG;MACZ,CAAC,EAAE,CAAC,CAAC;IACP,CAAC;EACH,CAAC,CAAC,CAAC;EAEH,OAAO;IAAEW,KAAK,EAAEC;EAAe,CAAC;AAClC"}